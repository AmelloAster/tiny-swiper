{"version":3,"file":"index.esm.js","sources":["../src/core/render/dom.ts","../src/modules/lazyload.ts","../src/modules/pagination.ts","../src/modules/keyboardControl.ts","../src/modules/mousewheel.ts","../src/modules/navigation.ts","../src/core/render/layout.ts","../src/core/options.ts","../src/core/eventHub.ts","../src/core/state/trace.ts","../src/core/state/index.ts","../src/core/render/nextTick.ts","../src/core/render/animation.ts","../src/core/sensor/actions.ts","../src/core/sensor/index.ts","../src/core/env/measure.ts","../src/core/env/limitation.ts","../src/core/env/index.ts","../src/core/render/index.ts","../src/core/state/operations.ts","../src/core/env/element.ts","../src/core/index.ts"],"sourcesContent":["export function addClass (\r\n    el: HTMLElement,\r\n    list: Array<string> | string = []\r\n): void {\r\n    if (!Array.isArray(list)) list = [list]\r\n\r\n    list.forEach(clz => (!el.classList.contains(clz) && el.classList.add(clz)))\r\n}\r\n\r\nexport function removeClass (\r\n    el: HTMLElement,\r\n    list: Array<string> | string = []\r\n): void {\r\n    if (!Array.isArray(list)) list = [list]\r\n\r\n    list.forEach(clz => (el.classList.contains(clz) && el.classList.remove(clz)))\r\n}\r\n\r\nexport function attachListener (\r\n    el: HTMLElement | Document | Window,\r\n    evtName: string,\r\n    handler: EventListenerOrEventListenerObject,\r\n    opts?: boolean | AddEventListenerOptions\r\n): void {\r\n    el.addEventListener(evtName, handler, opts)\r\n}\r\n\r\nexport function detachListener (\r\n    el: HTMLElement | Document | Window,\r\n    evtName: string,\r\n    handler: EventListenerOrEventListenerObject\r\n): void {\r\n    el.removeEventListener(evtName, handler)\r\n}\r\n\r\nexport function removeAttr (\r\n    el: HTMLElement,\r\n    attr: string\r\n): void {\r\n    el.removeAttribute(attr)\r\n}\r\n\r\nexport function setAttr (\r\n    el: HTMLElement,\r\n    attr: string,\r\n    value = ''\r\n): HTMLElement {\r\n    el.setAttribute(attr, value)\r\n    return el\r\n}\r\n\r\nexport function setStyle (\r\n    el: HTMLElement,\r\n    style: {[key: string]: string},\r\n    forceRender?: boolean\r\n): HTMLElement {\r\n    Object.keys(style).forEach(prop => {\r\n        // TS7015: Element implicitly has an 'any' type because index expression is not of type 'number'.\r\n        el.style[prop as any] = style[prop]\r\n    })\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-expressions\r\n    forceRender && getComputedStyle(el)\r\n\r\n    return el\r\n}\r\n\r\nexport function getTranslate (\r\n    el: HTMLElement,\r\n    isHorizontal: boolean\r\n): number {\r\n    const matrix = getComputedStyle(el).transform.replace(/[a-z]|\\(|\\)|\\s/g, '').split(',').map(parseFloat)\r\n    let arr: Array<number> = []\r\n\r\n    if (matrix.length === 16) {\r\n        arr = matrix.slice(12, 14)\r\n    } else if (matrix.length === 6) {\r\n        arr = matrix.slice(4, 6)\r\n    }\r\n    return (<Array<number>>arr)[isHorizontal ? 0 : 1] || 0\r\n}\r\n","import {\r\n    addClass,\r\n    removeClass\r\n} from '../core/render/dom'\r\nimport { SwiperInstance } from '../core/index'\r\nimport { Options } from '../core/options'\r\nimport { State } from '../core/state/index'\r\n\r\nexport type SwiperPluginLazyloadOptions = {\r\n    loadPrevNext: false\r\n    loadPrevNextAmount: 1\r\n    loadOnTransitionStart: false\r\n    elementClass: 'swiper-lazy'\r\n    loadingClass: 'swiper-lazy-loading'\r\n    loadedClass: 'swiper-lazy-loaded'\r\n    preloaderClass: 'swiper-lazy-preloader'\r\n}\r\n\r\nexport type SwiperPluginLazyloadHTMLElement = HTMLImageElement & {\r\n    isLoaded: boolean\r\n}\r\n\r\n/**\r\n * TinySwiper plugin for image lazy loading.\r\n *\r\n * @param {SwiperInstance} instance\r\n * @param {Options}\r\n */\r\nexport default function SwiperPluginLazyload (\r\n    instance: SwiperInstance & {\r\n        lazyload: {\r\n            load (index: number): void\r\n            loadRange (\r\n                index: number,\r\n                range: number\r\n            ): void\r\n        }\r\n    },\r\n    options: Options\r\n) {\r\n    if (!options.lazyload) return\r\n\r\n    const lazyloadOptions = <SwiperPluginLazyloadOptions>options.lazyload\r\n    const lazyload = {\r\n        load (index: number): void {\r\n            const $slide = instance.env.element.$list[index]\r\n\r\n            if (!$slide) return\r\n\r\n            const $imgs = [].slice.call($slide.getElementsByClassName(lazyloadOptions.elementClass))\r\n            const $preloaders: HTMLElement[] = [].slice.call($slide.getElementsByClassName(lazyloadOptions.preloaderClass))\r\n\r\n            function handleLoaded ($img: SwiperPluginLazyloadHTMLElement) {\r\n                $img.removeAttribute('data-src')\r\n                addClass($img, [lazyloadOptions.loadedClass])\r\n                removeClass($img, [lazyloadOptions.loadingClass])\r\n                $img.onload = null\r\n                $img.onerror = null\r\n                $img.isLoaded = true\r\n\r\n                if ($imgs.every((item: SwiperPluginLazyloadHTMLElement) => item.isLoaded)) {\r\n                    $preloaders.forEach(($preloader: HTMLElement) => {\r\n                        $preloader.parentElement!.removeChild($preloader)\r\n                    })\r\n                }\r\n            }\r\n\r\n            $imgs.forEach(($img: SwiperPluginLazyloadHTMLElement) => {\r\n                if (!$img.hasAttribute('data-src')) return\r\n\r\n                const src = $img.getAttribute('data-src')\r\n\r\n                addClass($img, [lazyloadOptions.loadingClass])\r\n                removeClass($img, [lazyloadOptions.loadedClass])\r\n                $img.src = src as string\r\n                $img.onload = () => handleLoaded($img)\r\n                $img.onerror = () => handleLoaded($img)\r\n            })\r\n        },\r\n\r\n        loadRange (\r\n            index: number,\r\n            range: number\r\n        ): void {\r\n            lazyload.load(index)\r\n\r\n            if (lazyloadOptions.loadPrevNext && range >= 1) {\r\n                for (let i = 1; i <= range; i++) {\r\n                    lazyload.load(index + i)\r\n                    lazyload.load(index - i)\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    instance.on('before-init', () => {\r\n        options.lazyload = {\r\n            loadPrevNext: false,\r\n            loadPrevNextAmount: 1,\r\n            loadOnTransitionStart: false,\r\n            elementClass: 'swiper-lazy',\r\n            loadingClass: 'swiper-lazy-loading',\r\n            loadedClass: 'swiper-lazy-loaded',\r\n            preloaderClass: 'swiper-lazy-preloader',\r\n            ...options.lazyload\r\n        }\r\n    })\r\n\r\n    if (lazyloadOptions.loadOnTransitionStart) {\r\n        instance.on('before-slide', (\r\n            oldIndex: number,\r\n            state: State,\r\n            newIndex: number\r\n        ) => {\r\n            lazyload.loadRange(newIndex, lazyloadOptions.loadPrevNextAmount)\r\n        })\r\n    } else {\r\n        instance.on('after-slide', (\r\n            index: number\r\n        ) => {\r\n            lazyload.loadRange(index, lazyloadOptions.loadPrevNextAmount)\r\n        })\r\n    }\r\n\r\n    instance.on('after-destroy', () => {\r\n        if (!instance.lazyload) return\r\n\r\n        delete instance.lazyload\r\n    })\r\n}\r\n","import {\n    addClass,\n    removeClass\n} from '../core/render/dom'\nimport { SwiperInstance } from '../core/index'\nimport { Options } from '../core/options'\n\nexport type SwiperPluginPaginationOptions = Options & {\n    pagination: {\n        el: string\n        clickable: false\n        bulletClass: 'swiper-pagination-bullet'\n        bulletActiveClass: 'swiper-pagination-bullet-active'\n    }\n}\n\nexport type SwiperPluginPaginationInstance = {\n    $pageList: HTMLElement[]\n    $pagination: HTMLElement | null\n}\n\nexport default function SwiperPluginPagination (\n    instance: SwiperInstance & {\n        pagination: SwiperPluginPaginationInstance\n    },\n    options: SwiperPluginPaginationOptions\n) {\n    const pagination = {\n        $pageList: [],\n        $pagination: null\n    } as unknown as SwiperPluginPaginationInstance\n\n    instance.on('before-init', () => {\n        if (options.pagination) {\n            options.pagination = Object.assign({\n                clickable: false,\n                bulletClass: 'swiper-pagination-bullet',\n                bulletActiveClass: 'swiper-pagination-bullet-active'\n            }, options.pagination)\n        }\n    })\n\n    instance.on('after-init', () => {\n        if (!options.pagination) return\n\n        const {\n            bulletClass,\n            bulletActiveClass\n        } = options.pagination\n        const {\n            element\n        } = instance.env\n        const {\n            $list\n        } = element\n\n        const $pagination = (typeof options.pagination.el === 'string'\n            ? document.body.querySelector(options.pagination.el)\n            : options.pagination.el) as HTMLElement\n        const $pageList: Array<HTMLElement> = []\n        const $group = document.createDocumentFragment()\n        const dotCount = $list.length - Math.ceil(options.slidesPerView) + 1\n\n        options.excludeElements.push($pagination as HTMLElement)\n\n        pagination.$pagination = $pagination\n        pagination.$pageList = $pageList\n\n        for (let index = 0; index < dotCount; index++) {\n            const $page = document.createElement('div')\n\n            addClass(\n                $page,\n                index === instance.state.index ? [bulletClass, bulletActiveClass] : bulletClass\n            )\n            $pageList.push($page)\n            $group.appendChild($page)\n        }\n\n        $pagination.appendChild($group)\n\n        if (options.pagination.clickable) {\n            $pagination.addEventListener('click', (e: Event) => {\n                instance.slideTo($pageList.indexOf(e.target as HTMLElement))\n                e.stopPropagation()\n            })\n        }\n    })\n\n    instance.on('after-destroy', () => {\n        if (!options.pagination) return\n\n        pagination.$pagination!.innerHTML = ''\n        pagination.$pageList = []\n        pagination.$pagination = null\n    })\n\n    instance.on('after-slide', (\n        currentIndex: number\n    ) => {\n        const { bulletActiveClass } = options.pagination\n\n        pagination.$pageList && pagination.$pageList.forEach(($page, index) => {\n            if (index === currentIndex) {\n                addClass($page, bulletActiveClass)\n            } else {\n                removeClass($page, bulletActiveClass)\n            }\n        })\n    })\n}\n","import {\r\n    attachListener,\r\n    detachListener\r\n} from '../core/render/dom'\r\nimport { SwiperInstance } from '../core/index'\r\nimport { Options } from '../core/options'\r\n\r\nexport type SwiperPluginKeyboardControlOptions = {\r\n    enabled: boolean\r\n    onlyInViewport: boolean\r\n}\r\n\r\nconst DIRECTION = {\r\n    up: 'ArrowUp',\r\n    right: 'ArrowRight',\r\n    down: 'ArrowDown',\r\n    left: 'ArrowLeft'\r\n}\r\n\r\nfunction isVisible (el: HTMLElement): boolean {\r\n    if (!el) return false\r\n\r\n    const style = getComputedStyle(el)\r\n    const visible = style.visibility !== 'hidden' && style.display !== 'none'\r\n\r\n    if (!visible) return false\r\n\r\n    return el.parentElement && el.parentElement.nodeType === 1\r\n        ? isVisible(el.parentElement)\r\n        : true\r\n}\r\n\r\nfunction isElementInView (el: HTMLElement): boolean {\r\n    const visibility = isVisible(el)\r\n    const boundary = el.getBoundingClientRect()\r\n    const isInView = (boundary.top >= 0 && boundary.bottom <= window.innerHeight)\r\n        && (boundary.left >= 0 && boundary.right <= window.innerWidth)\r\n\r\n    return isInView && visibility\r\n}\r\n\r\n/**\r\n * TinySwiper plugin for keyboard control.\r\n *\r\n * @param {SwiperInstance} instance\r\n * @param {Options}\r\n */\r\nexport default function SwiperPluginKeyboardControl (\r\n    instance: SwiperInstance & {\r\n        keyboard: {\r\n            onKeyDown (e: Event): void\r\n            enable (): void\r\n            disable (): void\r\n        }\r\n    },\r\n    options: Options\r\n): void {\r\n    if (!options.keyboard) return\r\n\r\n    const keyboardOptions = <SwiperPluginKeyboardControlOptions>options.keyboard\r\n    const keyboard = {\r\n        enable (): void {\r\n            keyboardOptions.enabled = true\r\n        },\r\n        disable (): void {\r\n            keyboardOptions.enabled = false\r\n        },\r\n        onKeyDown (e: KeyboardEvent): void {\r\n            const { key } = e\r\n\r\n            if ((keyboardOptions.onlyInViewport && !isElementInView(instance.env.element.$el))\r\n                || !keyboardOptions.enabled) return\r\n\r\n            if (options.isHorizontal) {\r\n                if (key === DIRECTION.left) {\r\n                    instance.slideTo(instance.state.index - 1)\r\n                } else if (key === DIRECTION.right) {\r\n                    instance.slideTo(instance.state.index + 1)\r\n                }\r\n            } else {\r\n                if (key === DIRECTION.down) {\r\n                    instance.slideTo(instance.state.index - 1)\r\n                } else if (key === DIRECTION.up) {\r\n                    instance.slideTo(instance.state.index + 1)\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    instance.on('before-init', () => {\r\n        options.keyboard = {\r\n            enabled: true,\r\n            onlyInViewport: true,\r\n            ...options.keyboard\r\n        }\r\n\r\n        instance.keyboard = keyboard\r\n\r\n        attachListener(window, 'keydown', keyboard.onKeyDown as EventListener)\r\n    })\r\n\r\n    instance.on('after-destroy', () => {\r\n        if (!keyboard) return\r\n\r\n        detachListener(window, 'keydown', keyboard.onKeyDown as EventListener)\r\n\r\n        delete instance.keyboard\r\n    })\r\n}\r\n","import {\r\n    attachListener,\r\n    detachListener\r\n} from '../core/render/dom'\r\nimport { SwiperInstance } from '../core/index'\r\nimport { Options } from '../core/options'\r\n\r\nexport type SwiperPluginMousewheelOptions = Options & {\r\n    mousewheel: {\r\n        invert: false\r\n        sensitivity: 1\r\n        interval: 400\r\n    }\r\n}\r\n\r\nexport type SwiperPluginMousewheelInstance = {\r\n    $el: HTMLElement\r\n}\r\n\r\nexport default function SwiperPluginMousewheel (\r\n    instance: SwiperInstance & {\r\n        mousewheel: SwiperPluginMousewheelInstance\r\n    },\r\n    options: SwiperPluginMousewheelOptions\r\n) {\r\n    const mousewheel = {\r\n        $el: null\r\n    } as unknown as SwiperPluginMousewheelInstance\r\n    const wheelStatus = {\r\n        wheeling: false,\r\n        wheelDelta: 0,\r\n        wheelingTimer: 0\r\n    }\r\n    const initWheelStatus = () => {\r\n        wheelStatus.wheeling = false\r\n        wheelStatus.wheelDelta = 0\r\n        wheelStatus.wheelingTimer = 0\r\n    }\r\n    const handler = (e: WheelEvent) => {\r\n        const delta = options.isHorizontal ? e.deltaX : e.deltaY\r\n        const {\r\n            index\r\n        } = instance.state\r\n\r\n        if ((Math.abs(delta) - Math.abs(wheelStatus.wheelDelta) > 0 || !wheelStatus.wheeling)\r\n            && Math.abs(delta) >= options.mousewheel.sensitivity) {\r\n            instance.slideTo(delta > 0 ? index - 1 : index + 1)\r\n        }\r\n        wheelStatus.wheelDelta = delta\r\n        clearTimeout(wheelStatus.wheelingTimer)\r\n        wheelStatus.wheeling = true\r\n        wheelStatus.wheelingTimer = setTimeout(() => {\r\n            initWheelStatus()\r\n        }, options.mousewheel.interval) as unknown as number\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n    }\r\n\r\n    instance.on('before-init', () => {\r\n        if (options.mousewheel) {\r\n            options.mousewheel = Object.assign({\r\n                invert: false,\r\n                sensitivity: 1,\r\n                interval: 400\r\n            }, options.mousewheel)\r\n        }\r\n    })\r\n\r\n    instance.on('after-init', () => {\r\n        if (!options.mousewheel) return\r\n\r\n        const {\r\n            element\r\n        } = instance.env\r\n        const {\r\n            $el\r\n        } = element\r\n\r\n        mousewheel.$el = $el\r\n\r\n        attachListener($el, 'wheel', <EventListener>handler)\r\n    })\r\n\r\n    instance.on('after-destroy', () => {\r\n        if (!options.mousewheel) return\r\n\r\n        detachListener(mousewheel.$el, 'wheel', <EventListener>handler)\r\n        delete mousewheel.$el\r\n    })\r\n}\r\n","import {\n    attachListener,\n    detachListener\n} from '../core/render/dom'\nimport { SwiperInstance } from '../core/index'\nimport { Options } from '../core/options'\n\n\nexport type SwiperPluginNavigationOptions = Options & {\n    navigation: {\n        nextEl: HTMLElement | string\n        prevEl: HTMLElement | string\n        disabledClass: string\n    }\n}\n\nexport type SwiperPluginNavigationInstance = {\n    nextEl: HTMLElement\n    prevEl: HTMLElement\n}\nexport default function SwiperPluginNavigation(\n    instance: SwiperInstance & {\n        navigation: SwiperPluginNavigationInstance\n    },\n    options: SwiperPluginNavigationOptions\n) {\n    const navigation = {\n        nextEl: null,\n        prevEl: null\n    } as unknown as SwiperPluginNavigationInstance\n\n    const nextClickHandler = (e: PointerEvent) => {\n        clickHandler(e.target as HTMLElement, 'next')\n    }\n\n    const prevClickHandler = (e: PointerEvent) => {\n        clickHandler(e.target as HTMLElement, 'prev')\n\n    }\n\n    const clickHandler = (e: HTMLElement, type: 'next' | 'prev') => {\n        if ( checkIsDisable(e) && !instance.options.loop ) {\n            return\n        }\n        const {\n            index\n        } = instance.state\n\n        if ( type === 'next' ) {\n            instance.slideTo(index + 1)\n        }\n\n        if ( type === 'prev' ) {\n            instance.slideTo(index - 1)\n        }\n    }\n\n    const checkSwiperDisabledClass = (\n        index: number) => {\n        const {\n            minIndex,\n            maxIndex\n        } = instance.env.limitation\n        if ( index === minIndex ) {\n            navigation.prevEl.classList.add(options.navigation.disabledClass)\n        }\n        if ( index === maxIndex ) {\n            navigation.nextEl.classList.add(options.navigation.disabledClass)\n        }\n    }\n\n    const checkNavBtnDisabledClass = (index: number) => {\n        const {\n            minIndex,\n            maxIndex\n        } = instance.env.limitation\n        if ( navigation && navigation.nextEl ) {\n            if ( navigation.nextEl.classList.contains(options.navigation.disabledClass)\n                && index > minIndex ) {\n                navigation.nextEl.classList.remove(options.navigation.disabledClass)\n            }\n            if ( navigation.prevEl.classList.contains(options.navigation.disabledClass)\n                && index < maxIndex ) {\n                navigation.prevEl.classList.remove(options.navigation.disabledClass)\n            }\n        }\n    }\n\n    const checkIsDisable = (e: HTMLElement) => {\n        if ( e.classList.contains(options.navigation.disabledClass) ) {\n            return true\n        }\n        return false\n    }\n\n    const checkButtonDefaultStatus = () => {\n        const {\n            index\n        } = instance.state\n        const {\n            $list\n        } = instance.env.element\n        const {\n            minIndex\n        } = instance.env.limitation\n        if ( index === minIndex) {\n            navigation.prevEl.classList.add(options.navigation.disabledClass)\n        }\n        if ( $list.length === minIndex ) {\n            navigation.nextEl.classList.add(options.navigation.disabledClass)\n        }\n    }\n\n    instance.on('after-slide', (currentIndex: number) => {\n        if ( !instance.options.loop ) {\n            checkSwiperDisabledClass(currentIndex)\n        }\n\n    })\n\n    instance.on('before-slide', (currentIndex: number, state: any, newIndex: number) => {\n        if ( !instance.options.loop ) {\n            checkNavBtnDisabledClass(newIndex)\n        }\n    })\n\n    instance.on('before-init', () => {\n        if ( options.navigation ) {\n            options.navigation = Object.assign({\n                disabledClass: 'swiper-button-disabled'\n            }, options.navigation)\n        }\n    })\n\n    instance.on('after-init', () => {\n        if ( !options.navigation ) return\n\n        navigation.nextEl = (typeof options.navigation.nextEl === 'string')\n            ? document.body.querySelector(options.navigation.nextEl) as HTMLElement\n            : options.navigation.nextEl\n        navigation.prevEl = (typeof options.navigation.prevEl === 'string')\n            ? document.body.querySelector(options.navigation.prevEl) as HTMLElement\n            : options.navigation.prevEl\n        if ( !instance.options.loop ) {\n            checkButtonDefaultStatus()\n        }\n        attachListener(navigation.nextEl, 'click', <EventListener>nextClickHandler)\n        attachListener(navigation.prevEl, 'click', <EventListener>prevClickHandler)\n    })\n\n    instance.on('after-destroy', () => {\n        if ( !options.navigation ) return\n\n        delete navigation.nextEl\n        delete navigation.prevEl\n\n        detachListener(navigation.nextEl, 'click', <EventListener>nextClickHandler)\n        detachListener(navigation.prevEl, 'click', <EventListener>prevClickHandler)\n    })\n}\n","import { State } from '../state/index'\r\nimport { Env } from '../env/index'\r\nimport { setStyle } from './dom'\r\nimport { Options } from '../options'\r\n\r\nexport function translate (\r\n    state: State,\r\n    env: Env,\r\n    options: Options,\r\n    duration: number\r\n): void {\r\n    const {\r\n        $wrapper\r\n    } = env.element\r\n    const wrapperStyle = {\r\n        transition: state.isStart\r\n            ? 'none'\r\n            : `transform ease ${duration}ms`,\r\n        transform: options.isHorizontal\r\n            ? `translate3d(${state.transforms}px, 0, 0)`\r\n            : `translate3d(0, ${state.transforms}px, 0)`\r\n    }\r\n\r\n    setStyle($wrapper, wrapperStyle)\r\n}\r\n","import { SwiperPlugin } from './index'\r\nimport { translate } from './render/layout'\r\nimport { State } from './state/index'\r\nimport { Env } from './env/index'\r\nimport { SwiperPluginLazyloadOptions } from '../modules/lazyload'\r\nimport { SwiperPluginPaginationOptions } from '../modules/pagination'\r\nimport { SwiperPluginKeyboardControlOptions } from '../modules/keyboardControl'\r\n\r\nexport type Direction = 'horizontal' | 'vertical'\r\nexport type Injections = {\r\n    translate: (\r\n        state: State,\r\n        env: Env,\r\n        options: Options,\r\n        duration: number\r\n    ) => void\r\n}\r\n\r\nexport type Options = {\r\n    direction: Direction\r\n    touchRatio: number\r\n    touchAngle: number\r\n    longSwipesRatio: number\r\n    initialSlide: number\r\n    loop: boolean\r\n    freeMode: boolean\r\n    mousewheel: boolean\r\n    passiveListeners: boolean\r\n    resistance: boolean\r\n    resistanceRatio: number\r\n    speed: number\r\n    longSwipesMs: number\r\n    spaceBetween: number\r\n    slidesPerView: number\r\n    centeredSlides: boolean\r\n    slidePrevClass: string\r\n    slideNextClass: string\r\n    slideActiveClass: string\r\n    slideClass: string\r\n    wrapperClass: string\r\n    touchStartPreventDefault: boolean\r\n    touchStartForcePreventDefault: boolean\r\n    touchMoveStopPropagation: boolean\r\n    excludeElements: Array<HTMLElement>\r\n    isHorizontal: boolean\r\n    plugins?: Array<SwiperPlugin>\r\n    injections: Injections\r\n\r\n    // Plugins\r\n    lazyload?: SwiperPluginLazyloadOptions\r\n    keyboard?: SwiperPluginKeyboardControlOptions\r\n    pagination?: SwiperPluginPaginationOptions\r\n}\r\n\r\nexport type UserOptions = Partial<Options>\r\n\r\nconst defaultOptions: UserOptions = {\r\n    // `isHorizontal` is computed value\r\n    direction: 'horizontal',\r\n    touchRatio: 1,\r\n    touchAngle: 45,\r\n    longSwipesRatio: 0.5,\r\n    initialSlide: 0,\r\n    loop: false,\r\n    freeMode: false,\r\n    mousewheel: false,\r\n    passiveListeners: true,\r\n    resistance: true,\r\n    resistanceRatio: 0.85,\r\n    speed: 300,\r\n    longSwipesMs: 300,\r\n    spaceBetween: 0,\r\n    slidesPerView: 1,\r\n    centeredSlides: false,\r\n    slidePrevClass: 'swiper-slide-prev',\r\n    slideNextClass: 'swiper-slide-next',\r\n    slideActiveClass: 'swiper-slide-active',\r\n    slideClass: 'swiper-slide',\r\n    wrapperClass: 'swiper-wrapper',\r\n    touchStartPreventDefault: true,\r\n    touchStartForcePreventDefault: false,\r\n    touchMoveStopPropagation: false,\r\n    excludeElements: [],\r\n    injections: {\r\n        translate\r\n    }\r\n}\r\n\r\nexport function optionFormatter (userOptions?: UserOptions): Options {\r\n    const options = <Options>{\r\n        ...defaultOptions,\r\n        ...userOptions\r\n    }\r\n\r\n    return {\r\n        ...options,\r\n        isHorizontal: options.direction === 'horizontal'\r\n    }\r\n}\r\n","export type EventHub = {\r\n    // eslint-disable-next-line @typescript-eslint/ban-types\r\n    on (evtName: string, cb: Function): void\r\n    off (evtName: string, cb: Function): void\r\n    emit (evtName: string, ...data: Array<any>): void\r\n    clear (): void\r\n}\r\n\r\nexport const LIFE_CYCLES = {\r\n    BEFORE_INIT: 'before-init',\r\n    AFTER_INIT: 'after-init',\r\n    BEFORE_SLIDE: 'before-slide',\r\n    SCROLL: 'scroll',\r\n    AFTER_SLIDE: 'after-slide',\r\n    BEFORE_DESTROY: 'before-destroy',\r\n    AFTER_DESTROY: 'after-destroy'\r\n}\r\n\r\nexport function EventHub (): EventHub {\r\n    let hub: {\r\n        [key: string]: Array<Function>\r\n    } = {}\r\n\r\n    function on (evtName: string, cb: Function): void {\r\n        if (!hub[evtName]) {\r\n            hub[evtName] = [cb]\r\n        } else {\r\n            hub[evtName].push(cb)\r\n        }\r\n    }\r\n\r\n    function off (evtName: string, cb: Function): void {\r\n        if (hub[evtName]) {\r\n            const index = hub[evtName].indexOf(cb)\r\n\r\n            // eslint-disable-next-line @typescript-eslint/no-unused-expressions\r\n            index > -1 && hub[evtName].splice(index, 1)\r\n        }\r\n    }\r\n\r\n    function emit (evtName: string, ...data: Array<any>): void {\r\n        if (hub[evtName]) {\r\n            hub[evtName].forEach(cb => cb(...data))\r\n        }\r\n    }\r\n\r\n    function clear (): void {\r\n        hub = {}\r\n    }\r\n\r\n    return {\r\n        on,\r\n        off,\r\n        emit,\r\n        clear\r\n    }\r\n}\r\n","const delta = 180 / Math.PI\r\n\r\nexport type TraceLogs = Array<Trace>\r\n\r\nexport type Offset = {\r\n    /**\r\n     * offset x\r\n     */\r\n    x: number\r\n\r\n    /**\r\n     * offset y\r\n     */\r\n    y: number\r\n}\r\n\r\nexport type Position = {\r\n    /**\r\n     * postion in the x-axis\r\n     */\r\n    x: number\r\n\r\n    /**\r\n     * postion in the y-axis\r\n     */\r\n    y: number\r\n}\r\n\r\nexport type Trace = {\r\n    /**\r\n     * timestamp of current postion\r\n     */\r\n    time: number\r\n} & Position\r\n\r\nexport type Tracker = {\r\n    push (postion: Position): void\r\n    vector (): Vector\r\n    clear (): void\r\n    getLogs (): TraceLogs\r\n    getDuration (): number\r\n    getOffset (): Offset\r\n}\r\n\r\nexport type Vector = {\r\n    /**\r\n     * offset in the x-axis\r\n     */\r\n    x: number\r\n\r\n    /**\r\n     * offset in the y-axis\r\n     */\r\n    y: number\r\n\r\n    /**\r\n     * velocity in the x-axis\r\n     */\r\n    velocityX: number\r\n\r\n    /**\r\n     * velocity in the y-axis\r\n     */\r\n    velocityY: number\r\n\r\n    /**\r\n     * direction angle\r\n     */\r\n    angle: number\r\n}\r\n\r\nexport function Vector (\r\n    logs: TraceLogs,\r\n    index: number\r\n): Vector {\r\n    const trace = logs[index]\r\n    const formerTrace = logs[index - 1] || trace // In case click action, there will be only one log data\r\n    const diff = {\r\n        x: trace.x - formerTrace.x,\r\n        y: trace.y - formerTrace.y\r\n    }\r\n    const duration = trace.time - formerTrace.time\r\n    const velocityX = diff.x / duration || 0\r\n    const velocityY = diff.y / duration || 0\r\n    const angle = Math.atan2(Math.abs(diff.y), Math.abs(diff.x)) * delta\r\n\r\n    return {\r\n        ...diff,\r\n        angle,\r\n        velocityX,\r\n        velocityY\r\n    }\r\n}\r\n\r\nexport function Tracker (): Tracker {\r\n    let logs: TraceLogs = []\r\n\r\n    function push (position: Position): void {\r\n        logs.push({\r\n            time: Date.now(),\r\n            ...position\r\n        })\r\n    }\r\n\r\n    function vector (): Vector {\r\n        return Vector(logs, logs.length - 1)\r\n    }\r\n\r\n    function clear () {\r\n        logs = []\r\n    }\r\n\r\n    function getLogs () {\r\n        return logs\r\n    }\r\n\r\n    function getDuration (): number {\r\n        const first = logs[0]\r\n        const last = logs[logs.length - 1]\r\n\r\n        return first ? last.time - first.time : 0\r\n    }\r\n\r\n    function getOffset (): Offset {\r\n        const first = logs[0]\r\n        const last = logs[logs.length - 1]\r\n\r\n        return first ? {\r\n            x: last.x - first.x,\r\n            y: last.y - first.y\r\n        } : {\r\n            x: 0,\r\n            y: 0\r\n        }\r\n    }\r\n\r\n    return {\r\n        getDuration,\r\n        getOffset,\r\n        getLogs,\r\n        vector,\r\n        clear,\r\n        push\r\n    }\r\n}\r\n","import { Tracker } from './trace'\r\n\r\nexport interface State {\r\n    tracker: Tracker\r\n    index: number\r\n    startTransform: number\r\n    isStart: boolean\r\n    isScrolling: boolean\r\n    isTouching: boolean\r\n    transforms: number\r\n    progress: number\r\n}\r\n\r\nexport function State (): State {\r\n    const state: State = {\r\n        tracker: Tracker(),\r\n        index: 0,\r\n        startTransform: 0,\r\n        isStart: false,\r\n        isScrolling: false,\r\n        isTouching: false,\r\n        transforms: 0,\r\n        progress: 0\r\n    }\r\n\r\n    return state\r\n}\r\n","function now () {\r\n    return performance ? performance.now() : Date.now()\r\n}\r\n\r\nexport type Tick = {\r\n    run (cb: (interval: DOMHighResTimeStamp) => void): void\r\n    stop (): void\r\n}\r\n\r\nexport function Tick (): Tick {\r\n    const nextFrame = requestAnimationFrame || webkitRequestAnimationFrame || setTimeout\r\n    const cancelNextFrame = cancelAnimationFrame || webkitCancelAnimationFrame || clearTimeout\r\n\r\n    let startTime: number | undefined\r\n    let id: number\r\n\r\n    function run (cb: (interval: DOMHighResTimeStamp) => void): void {\r\n        // eslint-disable-next-line no-void\r\n        startTime = startTime === void 0\r\n            ? now()\r\n            : startTime\r\n\r\n        // Why do not use callback argument:\r\n        // https://stackoverflow.com/questions/50895206/exact-time-of-display-requestanimationframe-usage-and-timeline\r\n        id = nextFrame(() => {\r\n            const timeStamp = now()\r\n            const interval = timeStamp - <number>startTime\r\n\r\n            startTime = timeStamp\r\n            cb(interval)\r\n        })\r\n    }\r\n\r\n    function stop (): void {\r\n        startTime = undefined\r\n        cancelNextFrame(id)\r\n    }\r\n\r\n    return {\r\n        run,\r\n        stop\r\n    }\r\n}\r\n","import { Tick } from './nextTick'\r\n\r\nexport type Animation = {\r\n    run (task: (interval: DOMHighResTimeStamp) => void): void\r\n    stop (): void\r\n}\r\n\r\nexport function Animation (): Animation {\r\n    const tick = Tick()\r\n\r\n    function run (task: (interval: DOMHighResTimeStamp) => void): void {\r\n        tick.run((interval: DOMHighResTimeStamp) => {\r\n            run(task)\r\n            task(interval)\r\n        })\r\n    }\r\n\r\n    function stop (): void {\r\n        tick.stop()\r\n    }\r\n\r\n    return {\r\n        run,\r\n        stop\r\n    }\r\n}\r\n","import { Position } from '../state/trace'\r\nimport { Options } from '../options'\r\nimport { Env } from '../env/index'\r\nimport { State } from '../state/index'\r\nimport { Operations } from '../state/operations'\r\nimport { Animation } from '../render/animation'\r\n\r\nexport type Actions = {\r\n    preheat (\r\n        originPosition: Position,\r\n        originTransform: number\r\n    ): void\r\n    move (position: Position): void\r\n    stop (): void\r\n}\r\n\r\nfunction resetState (\r\n    state: State,\r\n    operations: Operations\r\n): void {\r\n    const {\r\n        tracker\r\n    } = state\r\n    const {\r\n        initStatus\r\n    } = operations\r\n\r\n    tracker.clear()\r\n    initStatus()\r\n}\r\n\r\nexport function Actions (\r\n    options: Options,\r\n    env: Env,\r\n    state: State,\r\n    operations: Operations\r\n) {\r\n    const {\r\n        initLayout,\r\n        initStatus,\r\n        render,\r\n        scrollPixel,\r\n        slideTo,\r\n        getOffsetSteps\r\n    } = operations\r\n    const animation = Animation()\r\n\r\n    function preheat (\r\n        originPosition: Position,\r\n        originTransform: number\r\n    ): void {\r\n        const { tracker } = state\r\n\r\n        animation.stop()\r\n        tracker.clear()\r\n        tracker.push(originPosition)\r\n        initLayout(originTransform)\r\n        initStatus(originTransform)\r\n        state.isStart = true\r\n\r\n        render()\r\n    }\r\n\r\n    function move (position: Position): void {\r\n        const {\r\n            tracker\r\n        } = state\r\n        const {\r\n            touchRatio,\r\n            touchAngle,\r\n            isHorizontal\r\n        } = options\r\n\r\n        if (!state.isStart || state.isScrolling) return\r\n\r\n        tracker.push(position)\r\n\r\n        const vector = tracker.vector()\r\n        const displacement = tracker.getOffset()\r\n\r\n        // Ignore this move action if there is no displacement of screen touch point.\r\n        // In case of minimal mouse move event. (Moving mouse extreme slowly will get the zero offset.)\r\n        if (!displacement.x && !displacement.y) return\r\n\r\n        if ((isHorizontal && (vector.angle < touchAngle))\r\n            || (!isHorizontal && (90 - vector.angle) < touchAngle)\r\n            || state.isTouching\r\n        ) {\r\n            const offset = vector[isHorizontal ? 'x' : 'y'] * touchRatio\r\n\r\n            state.isTouching = true\r\n            scrollPixel(offset)\r\n            render()\r\n        } else {\r\n            state.isScrolling = true\r\n            tracker.clear()\r\n        }\r\n    }\r\n\r\n    function stop (): void {\r\n        const {\r\n            index,\r\n            tracker\r\n        } = state\r\n        const {\r\n            measure\r\n        } = env\r\n\r\n        if (!state.isStart) return\r\n\r\n        state.isStart = false\r\n\r\n        if (!options.freeMode) {\r\n            const duration = tracker.getDuration()\r\n            const trans = tracker.getOffset()[options.isHorizontal ? 'x' : 'y']\r\n            const jump = Math.ceil(Math.abs(trans) / measure.boxSize)\r\n            const longSwipeIndex = getOffsetSteps(trans)\r\n\r\n            if (duration > options.longSwipesMs) {\r\n                // long swipe action\r\n                slideTo(index + longSwipeIndex * (trans > 0 ? -1 : 1))\r\n            } else {\r\n                // short swipe action\r\n                slideTo(trans > 0 ? index - jump : index + jump)\r\n            }\r\n\r\n            resetState(state, operations)\r\n        } else {\r\n            const vector = tracker.vector()\r\n\r\n            let velocity = vector[options.isHorizontal ? 'velocityX' : 'velocityY']\r\n\r\n            animation.run((duration: number) => {\r\n                const offset = velocity * duration\r\n\r\n                velocity *= 0.98\r\n\r\n                if (Math.abs(offset) < 0.01) {\r\n                    animation.stop()\r\n                    resetState(state, operations)\r\n                } else {\r\n                    scrollPixel(offset)\r\n                    render(0)\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    return {\r\n        preheat,\r\n        move,\r\n        stop\r\n    }\r\n}\r\n","import { State } from '../state/index'\r\nimport { Env } from '../env/index'\r\nimport { attachListener, detachListener, getTranslate } from '../render/dom'\r\nimport { Options } from '../options'\r\nimport { Position } from '../state/trace'\r\nimport { Actions } from './actions'\r\nimport { Operations } from '../state/operations'\r\n\r\nexport type Sensor = {\r\n    attach: () => void\r\n    detach: () => void\r\n}\r\n\r\n// Only support single finger touch event.\r\nexport function Sensor (\r\n    env: Env,\r\n    state: State,\r\n    options: Options,\r\n    operations: Operations\r\n): Sensor {\r\n    const {\r\n        touchable\r\n    } = env\r\n    const formEls = [\r\n        'INPUT',\r\n        'SELECT',\r\n        'OPTION',\r\n        'TEXTAREA',\r\n        'BUTTON',\r\n        'VIDEO'\r\n    ]\r\n    const actions = Actions(options, env, state, operations)\r\n    const {\r\n        preheat,\r\n        move,\r\n        stop\r\n    } = actions\r\n\r\n    function getPosition (e: Event): Position {\r\n        const touch = touchable ? (<TouchEvent>e).changedTouches[0] : <MouseEvent>e\r\n\r\n        return {\r\n            x: touch.pageX,\r\n            y: touch.pageY\r\n        }\r\n    }\r\n\r\n    function onTouchStart (e: Event): void {\r\n        for (let i = 0; i < options.excludeElements.length; i++) {\r\n            if (options.excludeElements[i].contains(e.target as Node)) return\r\n        }\r\n\r\n        const {\r\n            $wrapper\r\n        } = env.element\r\n        const shouldPreventDefault = (options.touchStartPreventDefault && formEls.indexOf((<HTMLElement>e.target).nodeName) === -1)\r\n            || options.touchStartForcePreventDefault\r\n\r\n        if (shouldPreventDefault && !options.passiveListeners) e.preventDefault()\r\n\r\n        preheat(\r\n            getPosition(e),\r\n            getTranslate($wrapper, options.isHorizontal)\r\n        )\r\n    }\r\n\r\n    function onTouchMove (e: Event): void {\r\n        if (options.touchMoveStopPropagation) e.stopPropagation()\r\n\r\n        move(getPosition(e))\r\n        state.isTouching && e.preventDefault()\r\n    }\r\n\r\n    function onTouchEnd (): void {\r\n        stop()\r\n    }\r\n\r\n    function attach (): void {\r\n        const {\r\n            $el\r\n        } = env.element\r\n\r\n        if (touchable) {\r\n            attachListener($el, 'touchstart', onTouchStart, {\r\n                passive: options.passiveListeners,\r\n                capture: false\r\n            })\r\n            attachListener($el, 'touchmove', onTouchMove)\r\n            attachListener($el, 'touchend', onTouchEnd)\r\n            attachListener($el, 'touchcancel', onTouchEnd)\r\n        } else {\r\n            attachListener($el, 'mousedown', onTouchStart)\r\n            attachListener(document, 'mousemove', onTouchMove)\r\n            attachListener(document, 'mouseup', onTouchEnd)\r\n        }\r\n    }\r\n\r\n    function detach (): void {\r\n        const {\r\n            $el\r\n        } = env.element\r\n\r\n        detachListener($el, 'touchstart', onTouchStart)\r\n        detachListener($el, 'touchmove', onTouchMove)\r\n        detachListener($el, 'touchend', onTouchEnd)\r\n        detachListener($el, 'touchcancel', onTouchEnd)\r\n        detachListener($el, 'mousedown', onTouchStart)\r\n        detachListener(document, 'mousemove', onTouchMove)\r\n        detachListener(document, 'mouseup', onTouchEnd)\r\n    }\r\n\r\n    return {\r\n        attach,\r\n        detach\r\n    }\r\n}\r\n","import { Options } from '../options'\r\nimport { Element } from './element'\r\n\r\nexport type Measure = {\r\n    boxSize: number\r\n    viewSize: number\r\n    slideSize: number\r\n}\r\n\r\nexport function Measure (\r\n    options: Options,\r\n    element: Element\r\n): Measure {\r\n    const {\r\n        $el\r\n    } = element\r\n    const viewSize = options.isHorizontal ? $el.offsetWidth : $el.offsetHeight\r\n    const slideSize = (viewSize - (Math.ceil(options.slidesPerView - 1)) * options.spaceBetween) / options.slidesPerView\r\n    const boxSize = slideSize + options.spaceBetween\r\n\r\n    return {\r\n        boxSize,\r\n        viewSize,\r\n        slideSize\r\n    }\r\n}\r\n","import { Options } from '../options'\r\nimport { Element } from './element'\r\nimport { Measure } from './measure'\r\n\r\nexport type Limitation = {\r\n    min: number\r\n    max: number\r\n    base: number\r\n    expand: number\r\n    buffer: number\r\n    minIndex: number\r\n    maxIndex: number\r\n}\r\n\r\nexport function getExpand (\r\n    options: Options\r\n): number {\r\n    if (options.loop) {\r\n        // return options.slidesPerView >= element.$list.length\r\n        //     ? options.slidesPerView - element.$list.length + 1\r\n        //     : 1\r\n        return Math.ceil(options.slidesPerView)\r\n    }\r\n    return 0\r\n}\r\n\r\nexport function Limitation (\r\n    element: Element,\r\n    measure: Measure,\r\n    options: Options\r\n): Limitation {\r\n    const {\r\n        $list\r\n    } = element\r\n    const {\r\n        viewSize,\r\n        slideSize,\r\n        boxSize\r\n    } = measure\r\n    const expand = getExpand(options)\r\n    const buffer = expand * boxSize\r\n    const base = -buffer + (options.centeredSlides\r\n        ? (viewSize - slideSize) / 2\r\n        : 0)\r\n    // [min, max] usually equal to [-x, 0]\r\n    const max = base\r\n    const min = options.spaceBetween + (options.loop ? slideSize : viewSize) + base - boxSize * $list.length\r\n    const minIndex = 0\r\n    const maxIndex = $list.length - ((options.centeredSlides || options.loop)\r\n        ? 1\r\n        : Math.ceil(options.slidesPerView))\r\n\r\n    const limitation = {\r\n        max,\r\n        min,\r\n        base,\r\n        expand,\r\n        buffer,\r\n        minIndex,\r\n        maxIndex\r\n    }\r\n\r\n    return limitation\r\n}\r\n","import { Options } from '../options'\r\nimport { Element } from './element'\r\nimport { Measure } from './measure'\r\nimport { Limitation } from './limitation'\r\n\r\ndeclare global {\r\n    interface Window {\r\n        DocumentTouch: any\r\n    }\r\n    const DocumentTouch: any\r\n}\r\n\r\nexport type Env = {\r\n    touchable: boolean\r\n    element: Element\r\n    measure: Measure\r\n    limitation: Limitation\r\n    update (element: Element): void\r\n}\r\n\r\nexport function Env (\r\n    elem: Element,\r\n    options: Options\r\n): Env {\r\n    const env = <Env>{}\r\n\r\n    function update (element: Element): void {\r\n        const measure = Measure(\r\n            options,\r\n            element\r\n        )\r\n        const limitation = Limitation(\r\n            element,\r\n            measure,\r\n            options\r\n        )\r\n        const touchable = Boolean(\r\n            'ontouchstart' in window\r\n            || navigator.maxTouchPoints > 0\r\n            || navigator.msMaxTouchPoints > 0\r\n            || window.DocumentTouch && document instanceof DocumentTouch\r\n        )\r\n\r\n        Object.assign(env, {\r\n            touchable,\r\n            element,\r\n            measure,\r\n            limitation\r\n        })\r\n    }\r\n\r\n    env.update = update\r\n\r\n    update(elem)\r\n\r\n    return env\r\n}\r\n","import { Options } from '../options'\r\nimport {\r\n    removeClass, addClass, setStyle, setAttr, attachListener, detachListener\r\n} from './dom'\r\nimport { State } from '../state/index'\r\nimport { Env } from '../env/index'\r\n\r\nconst shallowTag = 'data-shallow-slider'\r\nconst sliderTag = 'data-slider'\r\n\r\nexport type Renderer = {\r\n    init (): void\r\n    render (\r\n        state: State,\r\n        duration?: number,\r\n        cb?: Function,\r\n        force?: boolean\r\n    ): void\r\n    destroy (): void\r\n    updateSize (): void\r\n}\r\n\r\nexport function Renderer (\r\n    env: Env,\r\n    options: Options\r\n): Renderer {\r\n    function updateItem (state: State): void {\r\n        const {\r\n            $wrapper\r\n        } = env.element\r\n        const {\r\n            index\r\n        } = state\r\n\r\n        $wrapper.querySelectorAll(`[${sliderTag}]`).forEach($slide => {\r\n            // eslint-disable-next-line no-bitwise\r\n            const tagNumber = ~~<string>$slide.getAttribute(sliderTag)\r\n\r\n            removeClass(<HTMLElement>$slide, [\r\n                options.slidePrevClass,\r\n                options.slideNextClass,\r\n                options.slideActiveClass\r\n            ])\r\n\r\n            if (tagNumber === index) {\r\n                addClass(<HTMLElement>$slide, options.slideActiveClass)\r\n            }\r\n            if (tagNumber === index - 1) {\r\n                addClass(<HTMLElement>$slide, options.slidePrevClass)\r\n            }\r\n            if (tagNumber === index + 1) {\r\n                addClass(<HTMLElement>$slide, options.slideNextClass)\r\n            }\r\n        })\r\n    }\r\n\r\n    function render (\r\n        state: State,\r\n        duration?: number,\r\n        cb?: Function,\r\n        force?: false\r\n    ) {\r\n        const {\r\n            $wrapper\r\n        } = env.element\r\n        const timing = duration === undefined ? options.speed : duration\r\n\r\n        options.injections.translate(state, env, options, timing)\r\n\r\n        // Update slide style only if scroll action is end.\r\n        if (!state.isStart) updateItem(state)\r\n\r\n        force && getComputedStyle($wrapper).transform\r\n        cb && setTimeout(cb, timing)\r\n    }\r\n\r\n    function appendExpandList (): void {\r\n        if (!options.loop) return\r\n\r\n        const {\r\n            element,\r\n            limitation\r\n        } = env\r\n        const {\r\n            $list,\r\n            $wrapper\r\n        } = element\r\n        const {\r\n            expand\r\n        } = limitation\r\n        const $leftExpandList = $list.slice(-expand)\r\n            .map($slide => <HTMLElement>$slide.cloneNode(true))\r\n        const $rightExpandList = $list.slice(0, expand)\r\n            .map($slide => <HTMLElement>$slide.cloneNode(true))\r\n\r\n        $leftExpandList.forEach(($shadowSlide, index) => {\r\n            $wrapper.appendChild(setAttr($rightExpandList[index], shallowTag))\r\n            $wrapper.insertBefore(setAttr($leftExpandList[index], shallowTag), $list[0])\r\n        })\r\n    }\r\n\r\n    function destroyExpandList (): void {\r\n        env.element.$wrapper\r\n            .querySelectorAll(`[${shallowTag}]`)\r\n            .forEach(item => env.element.$wrapper.removeChild(item))\r\n    }\r\n\r\n    function updateDom (): void {\r\n        env.element.$list.forEach((el, index) => setAttr(el, sliderTag, <any>index))\r\n\r\n        destroyExpandList()\r\n        appendExpandList()\r\n    }\r\n\r\n    function updateSize (): void {\r\n        const {\r\n            element,\r\n            measure\r\n        } = env\r\n        const {\r\n            $wrapper\r\n        } = element\r\n        const wrapperStyle = {\r\n            display: 'flex',\r\n            willChange: 'transform',\r\n            flexDirection: options.isHorizontal ? 'row' : 'column'\r\n        }\r\n        const itemStyle = {\r\n            [options.isHorizontal ? 'width' : 'height']: `${measure.slideSize}px`,\r\n            [options.isHorizontal ? 'margin-right' : 'margin-bottom']: `${options.spaceBetween}px`\r\n        }\r\n\r\n        setStyle($wrapper, wrapperStyle)\r\n        $wrapper.querySelectorAll(`[${sliderTag}]`)\r\n            .forEach($slide => setStyle(<HTMLElement>$slide, itemStyle))\r\n    }\r\n\r\n    function init (): void {\r\n        updateDom()\r\n        updateSize()\r\n    }\r\n\r\n    function destroy (): void {\r\n        const {\r\n            $list,\r\n            $wrapper\r\n        } = env.element\r\n        const arr = ['display', 'will-change', 'flex-direction']\r\n        const itemProp = options.isHorizontal ? 'margin-right' : 'margin-bottom'\r\n\r\n        arr.forEach((propertyName: string) => {\r\n            $wrapper.style.removeProperty(propertyName)\r\n        })\r\n        $list.forEach($slide => $slide.style.removeProperty(itemProp))\r\n        destroyExpandList()\r\n    }\r\n\r\n    return {\r\n        init,\r\n        render,\r\n        destroy,\r\n        updateSize\r\n    }\r\n}\r\n","import { State } from './index'\nimport { Limitation } from '../env/limitation'\nimport { EventHub, LIFE_CYCLES } from '../eventHub'\nimport { Renderer } from '../render/index'\nimport { Options } from '../options'\nimport { Env } from '../env/index'\n\nexport interface Operations {\n    update (): void\n    render (duration?: number): void\n    transform (trans: number): void\n    slideTo (\n        targetIndex: number,\n        duration?: number\n    ): void\n    scrollPixel (px: number): void\n    initStatus (startTransform?: number): void\n    initLayout (originTransform: number): void\n    getOffsetSteps (offset: number): number\n}\n\n/**\n * Detect whether slides is rush out boundary.\n * @param velocity - Velocity larger than zero means that slides move to the right direction\n * @param transform\n * @param limitation\n */\nexport function isExceedingLimits (\n    velocity: number,\n    transform: number,\n    limitation: Limitation\n): boolean {\n    return velocity > 0 && transform > (limitation.max)\n        || velocity < 0 && transform < (limitation.min)\n}\n\n/**\n * Return the shortest way to target Index.\n *      Negative number indicate the left direction, Index's value is decreasing.\n *      Positive number means index should increase.\n * @param currentIndex\n * @param targetIndex\n * @param limitation\n * @param defaultWay\n */\nexport function getShortestWay (\n    currentIndex: number,\n    targetIndex: number,\n    limitation: Limitation,\n    defaultWay: number\n): number {\n    const {\n        maxIndex,\n        minIndex\n    } = limitation\n\n    // Source expression show below:\n    // const shortcut = defaultWay > 0\n    //     ? minIndex - currentIndex + (targetIndex - maxIndex) - 1\n    //     : maxIndex - currentIndex + (targetIndex - minIndex) + 1\n\n    const shortcut = (defaultWay > 0 ? 1 : -1) * (minIndex - maxIndex - 1)\n        + targetIndex - currentIndex\n\n    return Math.abs(defaultWay) > Math.abs(shortcut)\n        ? shortcut\n        : defaultWay\n}\n\n/**\n * Get transform exceed value\n * Return zero if is not reached border.\n *\n * @param transform\n * @param limitation\n */\nexport function getExcess (\n    transform: number,\n    limitation: Limitation\n): number {\n    const exceedLeft = transform - limitation.max\n    const exceedRight = transform - limitation.min\n\n    return exceedLeft > 0\n        ? exceedLeft\n        : exceedRight < 0\n            ? exceedRight\n            : 0\n}\n\n/**\n * The Set of state operations.\n * Every external Render/Sensor/DomHandler are called by this Internal state machine.\n * That gives us the possibility to run Tiny-Swiper in different platform.\n *\n * @param env\n * @param state\n * @param options\n * @param renderer\n * @param eventHub\n * @constructor\n */\nexport function Operations (\n    env: Env,\n    state: State,\n    options: Options,\n    renderer: Renderer,\n    eventHub: EventHub\n): Operations {\n\n    /**\n     * Calculate the steps amount (boxSize) of offset.\n     *  eg: offset = 100, boxSize: 50, steps may equal to 2.\n     * @param offset\n     */\n    function getOffsetSteps (offset: number): number {\n        const {\n            measure\n        } = env\n        return Math.ceil(Math.abs(offset) / measure.boxSize - options.longSwipesRatio)\n    }\n\n    /**\n     * Call renderer's render function with default params.\n     * @param duration\n     * @param cb\n     * @param force\n     */\n    function render (\n        duration?: number,\n        cb?: Function,\n        force?: boolean\n    ): void {\n        renderer.render(\n            state,\n            duration,\n            cb,\n            force\n        )\n    }\n\n    /**\n     * Update Swiper transform attr.\n     * @param trans\n     */\n    function transform (trans: number): void {\n        const {\n            min,\n            max\n        } = env.limitation\n        const transRange = max - min + (options.loop ? env.measure.boxSize : 0)\n        const len = transRange + 1\n\n        let progress\n\n        state.transforms = trans\n\n        if (options.loop) {\n            progress = (max - trans) % len / transRange\n\n            state.progress = progress < 0\n                ? 1 + progress\n                : progress > 1\n                    ? progress - 1\n                    : progress\n        } else {\n            progress = (max - trans) / transRange\n\n            state.progress = progress < 0\n                ? 0\n                : progress > 1\n                    ? 1\n                    : progress\n        }\n\n        eventHub.emit(LIFE_CYCLES.SCROLL, {\n            ...state\n        })\n    }\n\n    /**\n     * Update Swiper transform state with certain Index.\n     * @param targetIndex\n     * @param duration\n     */\n    function slideTo (\n        targetIndex: number,\n        duration?: number\n    ): void {\n        const {\n            measure,\n            limitation\n        } = env\n        const len = limitation.maxIndex - limitation.minIndex + 1\n        const computedIndex = options.loop\n            ? (targetIndex % len + len) % len\n            : targetIndex > limitation.maxIndex\n                ? limitation.maxIndex\n                : targetIndex < limitation.minIndex\n                    ? limitation.minIndex\n                    : targetIndex\n        const newTransform = -computedIndex * measure.boxSize + limitation.base\n\n        // Slide to wrapper's boundary while touch end.\n        //  Math.abs(excess) ≥ 0\n        // Old condition: state.index === computedIndex\n        if (getOffsetSteps(newTransform - state.transforms) !== 0\n            && options.loop\n        ) {\n            const excess = getExcess(state.transforms, limitation)\n            const defaultWay = computedIndex - state.index\n            const shortcut = getShortestWay(\n                state.index,\n                computedIndex,\n                limitation,\n                defaultWay\n            )\n\n            if (shortcut !== defaultWay && !excess) {\n                transform(shortcut < 0\n                    ? limitation.min - measure.boxSize\n                    : limitation.max + measure.boxSize)\n            } else if (state.index === computedIndex) {\n                transform(excess > 0\n                    ? limitation.min - measure.boxSize + excess\n                    : limitation.max + measure.boxSize + excess)\n            }\n            // Set initial offset for rebounding animation.\n            render(0, undefined, true)\n        }\n\n        eventHub.emit(LIFE_CYCLES.BEFORE_SLIDE,\n            state.index,\n            state,\n            computedIndex)\n        state.index = computedIndex\n        transform(newTransform)\n        render(duration, () => {\n            eventHub.emit(LIFE_CYCLES.AFTER_SLIDE,\n                computedIndex,\n                state)\n        })\n    }\n\n    /**\n     * Scroll pixel by pixel while user dragging.\n     * @param px\n     */\n    function scrollPixel (px: number): void {\n        const {\n            transforms\n        } = state\n        const {\n            measure,\n            limitation\n        } = env\n        const ratio = Number(px.toExponential().split('e')[1])\n        const expand = ratio <= 0 ? Math.pow(10, -(ratio - 1)) : 1\n\n        let newTransform = transforms\n\n        // For optimizing, do not calculate `px` if options.loop === true\n        if (options.resistance && !options.loop) {\n            if (px > 0 && transforms >= limitation.max) {\n                px -= (px * expand) ** options.resistanceRatio / expand\n            } else if (px < 0 && transforms <= limitation.min) {\n                px += ((-px * expand) ** options.resistanceRatio) / expand\n            }\n        }\n\n        newTransform += px\n\n        if (options.loop) {\n            const vector = state.tracker.vector()\n            const velocity = options.isHorizontal ? vector.velocityX : vector.velocityY\n            const excess = getExcess(transforms, limitation)\n\n            if (excess && isExceedingLimits(\n                velocity,\n                transforms,\n                limitation\n            )) {\n                newTransform = excess > 0\n                    ? limitation.min - measure.boxSize + excess\n                    : limitation.max + measure.boxSize + excess\n            }\n        }\n\n        transform(newTransform)\n    }\n\n    function initStatus (startTransform = 0): void {\n        state.startTransform = startTransform\n        state.isStart = false\n        state.isScrolling = false\n        state.isTouching = false\n    }\n\n    function initLayout (originTransform: number): void {\n        transform(originTransform)\n    }\n\n    function update (): void {\n        slideTo(state.index, 0)\n        renderer.updateSize()\n    }\n\n    return {\n        update,\n        render,\n        transform,\n        slideTo,\n        scrollPixel,\n        initStatus,\n        initLayout,\n        getOffsetSteps\n    }\n}\n","import { Options } from '../options'\r\n\r\nexport type Element = {\r\n    $el: HTMLElement\r\n    $list: Array<HTMLElement>\r\n    $wrapper: HTMLElement\r\n}\r\n\r\nexport function Element (\r\n    el: HTMLElement | string,\r\n    options: Options\r\n): Element {\r\n    const $el = <HTMLElement>(typeof el === 'string' ? document.body.querySelector(el) : el)\r\n    const $wrapper = <HTMLElement>$el!.querySelector(`.${options.wrapperClass}`)\r\n    const $list = [].slice.call($el!.getElementsByClassName(options.slideClass))\r\n\r\n    return {\r\n        $el,\r\n        $wrapper,\r\n        $list\r\n    }\r\n}\r\n","import { UserOptions, optionFormatter, Options } from './options'\r\nimport { EventHub, LIFE_CYCLES } from './eventHub'\r\nimport { State } from './state/index'\r\nimport { Sensor } from './sensor/index'\r\nimport { Env } from './env/index'\r\nimport { Renderer } from './render/index'\r\nimport { Operations } from './state/operations'\r\nimport { Element } from './env/element'\r\n\r\nexport type SwiperInstance = {\r\n    on: (evtName: string, cb: Function) => void\r\n    off: (evtName: string, cb: Function) => void\r\n    update: () => void\r\n    destroy: () => void\r\n    slideTo: (index: number, duration?: number) => void\r\n    options: Options\r\n    env: Env\r\n    state: State\r\n    updateSize: () => void\r\n}\r\nexport type SwiperPlugin = (instance: SwiperInstance, options: Options) => void\r\n\r\nexport type Swiper = {\r\n    (el: HTMLElement | string, userOptions?: UserOptions): SwiperInstance\r\n    use: (plugins: Array<SwiperPlugin>) => void\r\n    plugins: Array<SwiperPlugin>\r\n}\r\n\r\nconst Swiper: Swiper = <Swiper> function (\r\n    el: HTMLElement | string,\r\n    userOptions: UserOptions\r\n): SwiperInstance {\r\n    const options = optionFormatter(userOptions)\r\n    const eventHub = EventHub()\r\n    const element = Element(\r\n        el,\r\n        options\r\n    )\r\n    const env = Env(element, options)\r\n    const state = State()\r\n    const {\r\n        on,\r\n        off,\r\n        emit\r\n    } = eventHub\r\n    const instance = {\r\n        on,\r\n        off,\r\n        env,\r\n        state,\r\n        options\r\n    } as SwiperInstance\r\n\r\n    (options.plugins || Swiper.plugins || [])\r\n        .forEach((plugin: SwiperPlugin) => plugin(\r\n            instance,\r\n            options\r\n        ))\r\n\r\n    emit(LIFE_CYCLES.BEFORE_INIT, instance)\r\n\r\n    // Initialize internal module\r\n    const renderer = Renderer(\r\n        env,\r\n        options\r\n    )\r\n    const operations = Operations(\r\n        env,\r\n        state,\r\n        options,\r\n        renderer,\r\n        eventHub\r\n    )\r\n    const sensor = Sensor(\r\n        env,\r\n        state,\r\n        options,\r\n        operations\r\n    )\r\n\r\n    function destroy (): void {\r\n        emit(LIFE_CYCLES.BEFORE_DESTROY, instance)\r\n        sensor.detach()\r\n        renderer.destroy()\r\n        emit(LIFE_CYCLES.AFTER_DESTROY, instance)\r\n        eventHub.clear()\r\n    }\r\n\r\n    function updateSize (): void {\r\n        env.update(Element(\r\n            el,\r\n            options\r\n        ))\r\n        operations.update()\r\n    }\r\n\r\n    function update (): void {\r\n        renderer.destroy()\r\n        env.update(Element(\r\n            el,\r\n            options\r\n        ))\r\n        renderer.init()\r\n        operations.update()\r\n    }\r\n\r\n    const {\r\n        slideTo\r\n    } = operations\r\n\r\n    Object.assign(instance, {\r\n        update,\r\n        destroy,\r\n        slideTo,\r\n        updateSize\r\n    })\r\n\r\n    renderer.init()\r\n    sensor.attach()\r\n    slideTo(\r\n        options.initialSlide,\r\n        0\r\n    )\r\n    emit(LIFE_CYCLES.AFTER_INIT, instance)\r\n\r\n    return instance\r\n}\r\n\r\nSwiper.use = (plugins: Array<SwiperPlugin>): void => {\r\n    Swiper.plugins = plugins\r\n}\r\n\r\nexport default Swiper\r\n"],"names":["addClass","el","list","Array","isArray","forEach","clz","classList","contains","add","removeClass","remove","attachListener","evtName","handler","opts","addEventListener","detachListener","removeEventListener","setAttr","attr","value","setAttribute","setStyle","style","forceRender","Object","keys","prop","getComputedStyle","getTranslate","isHorizontal","matrix","transform","replace","split","map","parseFloat","arr","length","slice","SwiperPluginLazyload","instance","options","lazyload","lazyloadOptions","load","index","$slide","env","element","$list","$imgs","call","getElementsByClassName","elementClass","$preloaders","preloaderClass","handleLoaded","$img","removeAttribute","loadedClass","loadingClass","onload","onerror","isLoaded","every","item","$preloader","parentElement","removeChild","hasAttribute","src","getAttribute","loadRange","range","loadPrevNext","i","on","loadPrevNextAmount","loadOnTransitionStart","oldIndex","state","newIndex","SwiperPluginPagination","pagination","$pageList","$pagination","assign","clickable","bulletClass","bulletActiveClass","document","body","querySelector","$group","createDocumentFragment","dotCount","Math","ceil","slidesPerView","excludeElements","push","$page","createElement","appendChild","e","slideTo","indexOf","target","stopPropagation","innerHTML","currentIndex","DIRECTION","up","right","down","left","isVisible","visible","visibility","display","nodeType","isElementInView","boundary","getBoundingClientRect","isInView","top","bottom","window","innerHeight","innerWidth","SwiperPluginKeyboardControl","keyboard","keyboardOptions","enable","enabled","disable","onKeyDown","key","onlyInViewport","$el","SwiperPluginMousewheel","mousewheel","wheelStatus","wheeling","wheelDelta","wheelingTimer","initWheelStatus","delta","deltaX","deltaY","abs","sensitivity","clearTimeout","setTimeout","interval","preventDefault","invert","SwiperPluginNavigation","navigation","nextEl","prevEl","nextClickHandler","clickHandler","prevClickHandler","type","checkIsDisable","loop","checkSwiperDisabledClass","limitation","minIndex","maxIndex","disabledClass","checkNavBtnDisabledClass","checkButtonDefaultStatus","translate","duration","$wrapper","wrapperStyle","transition","isStart","transforms","defaultOptions","direction","touchRatio","touchAngle","longSwipesRatio","initialSlide","freeMode","passiveListeners","resistance","resistanceRatio","speed","longSwipesMs","spaceBetween","centeredSlides","slidePrevClass","slideNextClass","slideActiveClass","slideClass","wrapperClass","touchStartPreventDefault","touchStartForcePreventDefault","touchMoveStopPropagation","injections","optionFormatter","userOptions","LIFE_CYCLES","BEFORE_INIT","AFTER_INIT","BEFORE_SLIDE","SCROLL","AFTER_SLIDE","BEFORE_DESTROY","AFTER_DESTROY","EventHub","hub","cb","off","splice","emit","data","clear","PI","Vector","logs","trace","formerTrace","diff","x","y","time","velocityX","velocityY","angle","atan2","Tracker","position","Date","now","vector","getLogs","getDuration","first","last","getOffset","State","tracker","startTransform","isScrolling","isTouching","progress","performance","Tick","nextFrame","requestAnimationFrame","webkitRequestAnimationFrame","cancelNextFrame","cancelAnimationFrame","webkitCancelAnimationFrame","startTime","id","run","timeStamp","stop","undefined","Animation","tick","task","resetState","operations","initStatus","Actions","initLayout","render","scrollPixel","getOffsetSteps","animation","preheat","originPosition","originTransform","move","displacement","offset","measure","trans","jump","boxSize","longSwipeIndex","velocity","Sensor","touchable","formEls","actions","getPosition","touch","changedTouches","pageX","pageY","onTouchStart","shouldPreventDefault","nodeName","onTouchMove","onTouchEnd","attach","passive","capture","detach","Measure","viewSize","offsetWidth","offsetHeight","slideSize","getExpand","Limitation","expand","buffer","base","max","min","Env","elem","update","Boolean","navigator","maxTouchPoints","msMaxTouchPoints","DocumentTouch","shallowTag","sliderTag","Renderer","updateItem","querySelectorAll","tagNumber","force","timing","appendExpandList","$leftExpandList","cloneNode","$rightExpandList","$shadowSlide","insertBefore","destroyExpandList","updateDom","updateSize","willChange","flexDirection","itemStyle","init","destroy","itemProp","propertyName","removeProperty","isExceedingLimits","getShortestWay","targetIndex","defaultWay","shortcut","getExcess","exceedLeft","exceedRight","Operations","renderer","eventHub","transRange","len","computedIndex","newTransform","excess","px","ratio","Number","toExponential","pow","Element","Swiper","plugins","plugin","sensor","use"],"mappings":"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"}