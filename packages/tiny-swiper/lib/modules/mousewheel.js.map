{"version":3,"file":"mousewheel.js","sources":["../../src/core/render/dom.ts","../../src/modules/mousewheel.ts"],"sourcesContent":["export function addClass (\n    el: HTMLElement,\n    list: Array<string> | string = []\n): void {\n    if (!Array.isArray(list)) list = [list]\n\n    list.forEach(clz => (!el.classList.contains(clz) && el.classList.add(clz)))\n}\n\nexport function removeClass (\n    el: HTMLElement,\n    list: Array<string> | string = []\n): void {\n    if (!Array.isArray(list)) list = [list]\n\n    list.forEach(clz => (el.classList.contains(clz) && el.classList.remove(clz)))\n}\n\nexport function attachListener (\n    el: HTMLElement | Document | Window,\n    evtName: string,\n    handler: EventListenerOrEventListenerObject,\n    opts?: boolean | AddEventListenerOptions\n): void {\n    el.addEventListener(evtName, handler, opts)\n}\n\nexport function detachListener (\n    el: HTMLElement | Document | Window,\n    evtName: string,\n    handler: EventListenerOrEventListenerObject\n): void {\n    el.removeEventListener(evtName, handler)\n}\n\nexport function removeAttr (\n    el: HTMLElement,\n    attr: string\n): void {\n    el.removeAttribute(attr)\n}\n\nexport function setAttr (\n    el: HTMLElement,\n    attr: string,\n    value = ''\n): HTMLElement {\n    el.setAttribute(attr, value)\n    return el\n}\n\nexport function setStyle (\n    el: HTMLElement,\n    style: {[key: string]: string},\n    forceRender?: boolean\n): HTMLElement {\n    Object.keys(style).forEach(prop => {\n        // TS7015: Element implicitly has an 'any' type because index expression is not of type 'number'.\n        el.style[prop as any] = style[prop]\n    })\n    // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n    forceRender && getComputedStyle(el)\n\n    return el\n}\n\nexport function getTranslate (\n    el: HTMLElement,\n    isHorizontal: boolean\n): number {\n    const matrix = getComputedStyle(el).transform.replace(/[a-z]|\\(|\\)|\\s/g, '').split(',').map(parseFloat)\n    let arr: Array<number> = []\n\n    if (matrix.length === 16) {\n        arr = matrix.slice(12, 14)\n    } else if (matrix.length === 6) {\n        arr = matrix.slice(4, 6)\n    }\n    return (<Array<number>>arr)[isHorizontal ? 0 : 1] || 0\n}\n","import {\n    addClass,\n    removeClass,\n    attachListener,\n    detachListener\n} from '../core/render/dom'\nimport { SwiperInstance } from '../core/index'\nimport { Options } from '../core/options'\n\nexport type SwiperPluginMousewheelOptions = Options & {\n    mousewheel: {\n        invert: false\n        sensitivity: 1\n    }\n}\n\nexport type SwiperPluginMousewheelInstance = {\n    $el: HTMLElement\n}\n\nexport default function SwiperPluginMousewheel (\n    instance: SwiperInstance & {\n        mousewheel: SwiperPluginMousewheelInstance\n    },\n    options: SwiperPluginMousewheelOptions\n) {\n    const mousewheel = {\n        $el: null\n    } as unknown as SwiperPluginMousewheelInstance\n    const wheelStatus = {\n        wheeling: false,\n        wheelDelta: 0,\n        wheelingTimer: 0\n    }\n    const initWheelStatus = () => {\n        wheelStatus.wheeling = false\n        wheelStatus.wheelDelta = 0\n        wheelStatus.wheelingTimer = 0\n    }\n    const handler = (e: WheelEvent) => {\n        const delta = options.isHorizontal ? e.deltaX : e.deltaY\n        const {\n            index\n        } = instance.state\n\n        if ((Math.abs(delta) - Math.abs(wheelStatus.wheelDelta) > 0 || !wheelStatus.wheeling)\n            && Math.abs(delta) >= options.mousewheel.sensitivity) {\n            instance.slideTo(delta > 0 ? index - 1 : index + 1)\n        }\n        wheelStatus.wheelDelta = delta\n        clearTimeout(wheelStatus.wheelingTimer)\n        wheelStatus.wheeling = true\n        wheelStatus.wheelingTimer = setTimeout(() => {\n            initWheelStatus()\n        }, 200) as unknown as number\n        e.preventDefault()\n        e.stopPropagation()\n    }\n\n    instance.on('before-init', () => {\n        if (options.mousewheel) {\n            options.mousewheel = Object.assign({\n                invert: false,\n                sensitivity: 1\n            }, options.mousewheel)\n        }\n    })\n\n    instance.on('after-init', () => {\n        if (!options.mousewheel) return\n\n        const {\n            element\n        } = instance.env\n        const {\n            $el\n        } = element\n\n        mousewheel.$el = $el\n\n        attachListener($el, 'wheel', <EventListener>handler)\n    })\n\n    instance.on('after-destroy', () => {\n        if (!options.mousewheel) return\n\n        detachListener(mousewheel.$el, 'wheel', <EventListener>handler)\n    })\n}\n"],"names":["attachListener","el","evtName","handler","opts","addEventListener","detachListener","removeEventListener","SwiperPluginMousewheel","instance","options","mousewheel","$el","wheelStatus","wheeling","wheelDelta","wheelingTimer","initWheelStatus","e","delta","isHorizontal","deltaX","deltaY","index","state","Math","abs","sensitivity","slideTo","clearTimeout","setTimeout","preventDefault","stopPropagation","on","Object","assign","invert","element","env"],"mappings":";;;;;;aAkBgBA,eACZC,IACAC,SACAC,SACAC;IAEAH,EAAAA,EAAE,CAACI,gBAAH,CAAoBH,OAApB,EAA6BC,OAA7B,EAAsCC,IAAtC;IACH;aAEeE,eACZL,IACAC,SACAC;IAEAF,EAAAA,EAAE,CAACM,mBAAH,CAAuBL,OAAvB,EAAgCC,OAAhC;IACH;;aCbuBK,uBACpBC,UAGAC;IAEA,MAAMC,UAAU,GAAG;IACfC,IAAAA,GAAG,EAAE;IADU,GAAnB;IAGA,MAAMC,WAAW,GAAG;IAChBC,IAAAA,QAAQ,EAAE,KADM;IAEhBC,IAAAA,UAAU,EAAE,CAFI;IAGhBC,IAAAA,aAAa,EAAE;IAHC,GAApB;;IAKA,MAAMC,eAAe,GAAG,SAAlBA,eAAkB;IACpBJ,IAAAA,WAAW,CAACC,QAAZ,GAAuB,KAAvB;IACAD,IAAAA,WAAW,CAACE,UAAZ,GAAyB,CAAzB;IACAF,IAAAA,WAAW,CAACG,aAAZ,GAA4B,CAA5B;IACH,GAJD;;IAKA,MAAMb,OAAO,GAAG,SAAVA,OAAU,CAACe,CAAD;IACZ,QAAMC,KAAK,GAAGT,OAAO,CAACU,YAAR,GAAuBF,CAAC,CAACG,MAAzB,GAAkCH,CAAC,CAACI,MAAlD;YAEIC,QACAd,QAAQ,CAACe,MADTD;;IAGJ,QAAI,CAACE,IAAI,CAACC,GAAL,CAASP,KAAT,IAAkBM,IAAI,CAACC,GAAL,CAASb,WAAW,CAACE,UAArB,CAAlB,GAAqD,CAArD,IAA0D,CAACF,WAAW,CAACC,QAAxE,KACGW,IAAI,CAACC,GAAL,CAASP,KAAT,KAAmBT,OAAO,CAACC,UAAR,CAAmBgB,WAD7C,EAC0D;IACtDlB,MAAAA,QAAQ,CAACmB,OAAT,CAAiBT,KAAK,GAAG,CAAR,GAAYI,KAAK,GAAG,CAApB,GAAwBA,KAAK,GAAG,CAAjD;IACH;;IACDV,IAAAA,WAAW,CAACE,UAAZ,GAAyBI,KAAzB;IACAU,IAAAA,YAAY,CAAChB,WAAW,CAACG,aAAb,CAAZ;IACAH,IAAAA,WAAW,CAACC,QAAZ,GAAuB,IAAvB;IACAD,IAAAA,WAAW,CAACG,aAAZ,GAA4Bc,UAAU,CAAC;IACnCb,MAAAA,eAAe;IAClB,KAFqC,EAEnC,GAFmC,CAAtC;IAGAC,IAAAA,CAAC,CAACa,cAAF;IACAb,IAAAA,CAAC,CAACc,eAAF;IACH,GAlBD;;IAoBAvB,EAAAA,QAAQ,CAACwB,EAAT,CAAY,aAAZ,EAA2B;IACvB,QAAIvB,OAAO,CAACC,UAAZ,EAAwB;IACpBD,MAAAA,OAAO,CAACC,UAAR,GAAqBuB,MAAM,CAACC,MAAP,CAAc;IAC/BC,QAAAA,MAAM,EAAE,KADuB;IAE/BT,QAAAA,WAAW,EAAE;IAFkB,OAAd,EAGlBjB,OAAO,CAACC,UAHU,CAArB;IAIH;IACJ,GAPD;IASAF,EAAAA,QAAQ,CAACwB,EAAT,CAAY,YAAZ,EAA0B;IACtB,QAAI,CAACvB,OAAO,CAACC,UAAb,EAAyB;YAGrB0B,UACA5B,QAAQ,CAAC6B,IADTD;YAGAzB,MACAyB,QADAzB;IAGJD,IAAAA,UAAU,CAACC,GAAX,GAAiBA,GAAjB;IAEAZ,IAAAA,cAAc,CAACY,GAAD,EAAM,OAAN,EAA8BT,OAA9B,CAAd;IACH,GAbD;IAeAM,EAAAA,QAAQ,CAACwB,EAAT,CAAY,eAAZ,EAA6B;IACzB,QAAI,CAACvB,OAAO,CAACC,UAAb,EAAyB;IAEzBL,IAAAA,cAAc,CAACK,UAAU,CAACC,GAAZ,EAAiB,OAAjB,EAAyCT,OAAzC,CAAd;IACH,GAJD;IAKH;;;;;;;;"}