{"version":3,"file":"mousewheel.js","sources":["../../src/core/render/dom.ts","../../src/modules/mousewheel.ts"],"sourcesContent":["export function addClass (\r\n    el: HTMLElement,\r\n    list: Array<string> | string = []\r\n): void {\r\n    if (!Array.isArray(list)) list = [list]\r\n\r\n    list.forEach(clz => (!el.classList.contains(clz) && el.classList.add(clz)))\r\n}\r\n\r\nexport function removeClass (\r\n    el: HTMLElement,\r\n    list: Array<string> | string = []\r\n): void {\r\n    if (!Array.isArray(list)) list = [list]\r\n\r\n    list.forEach(clz => (el.classList.contains(clz) && el.classList.remove(clz)))\r\n}\r\n\r\nexport function attachListener (\r\n    el: HTMLElement | Document | Window,\r\n    evtName: string,\r\n    handler: EventListenerOrEventListenerObject,\r\n    opts?: boolean | AddEventListenerOptions\r\n): void {\r\n    el.addEventListener(evtName, handler, opts)\r\n}\r\n\r\nexport function detachListener (\r\n    el: HTMLElement | Document | Window,\r\n    evtName: string,\r\n    handler: EventListenerOrEventListenerObject\r\n): void {\r\n    el.removeEventListener(evtName, handler)\r\n}\r\n\r\nexport function removeAttr (\r\n    el: HTMLElement,\r\n    attr: string\r\n): void {\r\n    el.removeAttribute(attr)\r\n}\r\n\r\nexport function setAttr (\r\n    el: HTMLElement,\r\n    attr: string,\r\n    value = ''\r\n): HTMLElement {\r\n    el.setAttribute(attr, value)\r\n    return el\r\n}\r\n\r\nexport function setStyle (\r\n    el: HTMLElement,\r\n    style: {[key: string]: string},\r\n    forceRender?: boolean\r\n): HTMLElement {\r\n    Object.keys(style).forEach(prop => {\r\n        // TS7015: Element implicitly has an 'any' type because index expression is not of type 'number'.\r\n        el.style[prop as any] = style[prop]\r\n    })\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-expressions\r\n    forceRender && getComputedStyle(el)\r\n\r\n    return el\r\n}\r\n\r\nexport function getTranslate (\r\n    el: HTMLElement,\r\n    isHorizontal: boolean\r\n): number {\r\n    const matrix = getComputedStyle(el).transform.replace(/[a-z]|\\(|\\)|\\s/g, '').split(',').map(parseFloat)\r\n    let arr: Array<number> = []\r\n\r\n    if (matrix.length === 16) {\r\n        arr = matrix.slice(12, 14)\r\n    } else if (matrix.length === 6) {\r\n        arr = matrix.slice(4, 6)\r\n    }\r\n    return (<Array<number>>arr)[isHorizontal ? 0 : 1] || 0\r\n}\r\n","import {\r\n    attachListener,\r\n    detachListener\r\n} from '../core/render/dom'\r\nimport { SwiperInstance } from '../core/index'\r\nimport { Options } from '../core/options'\r\n\r\nexport type SwiperPluginMousewheelOptions = Options & {\r\n    mousewheel: {\r\n        invert: false\r\n        sensitivity: 1\r\n        interval: 400\r\n    }\r\n}\r\n\r\nexport type SwiperPluginMousewheelInstance = {\r\n    $el: HTMLElement\r\n}\r\n\r\nexport default function SwiperPluginMousewheel (\r\n    instance: SwiperInstance & {\r\n        mousewheel: SwiperPluginMousewheelInstance\r\n    },\r\n    options: SwiperPluginMousewheelOptions\r\n) {\r\n    const mousewheel = {\r\n        $el: null\r\n    } as unknown as SwiperPluginMousewheelInstance\r\n    const wheelStatus = {\r\n        wheeling: false,\r\n        wheelDelta: 0,\r\n        wheelingTimer: 0\r\n    }\r\n    const initWheelStatus = () => {\r\n        wheelStatus.wheeling = false\r\n        wheelStatus.wheelDelta = 0\r\n        wheelStatus.wheelingTimer = 0\r\n    }\r\n    const handler = (e: WheelEvent) => {\r\n        const delta = options.isHorizontal ? e.deltaX : e.deltaY\r\n        const {\r\n            index\r\n        } = instance.state\r\n\r\n        if ((Math.abs(delta) - Math.abs(wheelStatus.wheelDelta) > 0 || !wheelStatus.wheeling)\r\n            && Math.abs(delta) >= options.mousewheel.sensitivity) {\r\n            instance.slideTo(delta > 0 ? index - 1 : index + 1)\r\n        }\r\n        wheelStatus.wheelDelta = delta\r\n        clearTimeout(wheelStatus.wheelingTimer)\r\n        wheelStatus.wheeling = true\r\n        wheelStatus.wheelingTimer = setTimeout(() => {\r\n            initWheelStatus()\r\n        }, options.mousewheel.interval) as unknown as number\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n    }\r\n\r\n    instance.on('before-init', () => {\r\n        if (options.mousewheel) {\r\n            options.mousewheel = Object.assign({\r\n                invert: false,\r\n                sensitivity: 1,\r\n                interval: 400\r\n            }, options.mousewheel)\r\n        }\r\n    })\r\n\r\n    instance.on('after-init', () => {\r\n        if (!options.mousewheel) return\r\n\r\n        const {\r\n            element\r\n        } = instance.env\r\n        const {\r\n            $el\r\n        } = element\r\n\r\n        mousewheel.$el = $el\r\n\r\n        attachListener($el, 'wheel', <EventListener>handler)\r\n    })\r\n\r\n    instance.on('after-destroy', () => {\r\n        if (!options.mousewheel) return\r\n\r\n        detachListener(mousewheel.$el, 'wheel', <EventListener>handler)\r\n        delete mousewheel.$el\r\n    })\r\n}\r\n"],"names":["attachListener","el","evtName","handler","opts","addEventListener","detachListener","removeEventListener","SwiperPluginMousewheel","instance","options","mousewheel","$el","wheelStatus","wheeling","wheelDelta","wheelingTimer","initWheelStatus","e","delta","isHorizontal","deltaX","deltaY","index","state","Math","abs","sensitivity","slideTo","clearTimeout","setTimeout","interval","preventDefault","stopPropagation","on","Object","assign","invert","element","env"],"mappings":"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"}