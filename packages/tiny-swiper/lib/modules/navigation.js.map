{"version":3,"file":"navigation.js","sources":["../../src/core/render/dom.ts","../../src/modules/navigation.ts"],"sourcesContent":["export function addClass (\n    el: HTMLElement,\n    list: Array<string> | string = []\n): void {\n    if (!Array.isArray(list)) list = [list]\n\n    list.forEach(clz => (!el.classList.contains(clz) && el.classList.add(clz)))\n}\n\nexport function removeClass (\n    el: HTMLElement,\n    list: Array<string> | string = []\n): void {\n    if (!Array.isArray(list)) list = [list]\n\n    list.forEach(clz => (el.classList.contains(clz) && el.classList.remove(clz)))\n}\n\nexport function attachListener (\n    el: HTMLElement | Document | Window,\n    evtName: string,\n    handler: EventListenerOrEventListenerObject,\n    opts?: boolean | AddEventListenerOptions\n): void {\n    el.addEventListener(evtName, handler, opts)\n}\n\nexport function detachListener (\n    el: HTMLElement | Document | Window,\n    evtName: string,\n    handler: EventListenerOrEventListenerObject\n): void {\n    el.removeEventListener(evtName, handler)\n}\n\nexport function removeAttr (\n    el: HTMLElement,\n    attr: string\n): void {\n    el.removeAttribute(attr)\n}\n\nexport function setAttr (\n    el: HTMLElement,\n    attr: string,\n    value = ''\n): HTMLElement {\n    el.setAttribute(attr, value)\n    return el\n}\n\nexport function setStyle (\n    el: HTMLElement,\n    style: {[key: string]: string},\n    forceRender?: boolean\n): HTMLElement {\n    Object.keys(style).forEach(prop => {\n        // TS7015: Element implicitly has an 'any' type because index expression is not of type 'number'.\n        el.style[prop as any] = style[prop]\n    })\n    // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n    forceRender && getComputedStyle(el)\n\n    return el\n}\n\nexport function getTranslate (\n    el: HTMLElement,\n    isHorizontal: boolean\n): number {\n    const matrix = getComputedStyle(el).transform.replace(/[a-z]|\\(|\\)|\\s/g, '').split(',').map(parseFloat)\n    let arr: Array<number> = []\n\n    if (matrix.length === 16) {\n        arr = matrix.slice(12, 14)\n    } else if (matrix.length === 6) {\n        arr = matrix.slice(4, 6)\n    }\n    return (<Array<number>>arr)[isHorizontal ? 0 : 1] || 0\n}\n","import {\n    attachListener,\n    detachListener\n} from '../core/render/dom'\nimport {SwiperInstance} from '../core/index'\nimport {Options} from '../core/options'\n\nexport type SwiperPluginNavigationOptions = Options & {\n    navigation: {\n        nextEl: HTMLElement | string\n        prevEl: HTMLElement | string\n        disabledClass: string\n    }\n}\n\nexport type SwiperPluginNavigationInstance = {\n    nextEl: HTMLElement\n    prevEl: HTMLElement\n}\nexport default function SwiperPluginNavigation(\n    instance: SwiperInstance & {\n        navigation: SwiperPluginNavigationInstance\n    },\n    options: SwiperPluginNavigationOptions\n) {\n    const navigation = {\n        nextEl: null,\n        prevEl: null\n    } as unknown as SwiperPluginNavigationInstance\n\n    const nextClickHandler = (e: PointerEvent) => {\n        clickHandler(e.target as HTMLElement, 'next');\n    };\n\n    const prevClickHandler = (e: PointerEvent) => {\n        clickHandler(e.target as HTMLElement, 'prev');\n\n    };\n\n    const clickHandler = (e: HTMLElement, type: 'next' | 'prev') => {\n        if (checkIsDisable(e) && !instance.options.loop) {\n            return\n        }\n        const {\n            index\n        } = instance.state\n        const {\n            $list\n        } = instance.env.element\n        let currentIdx = index;\n\n        if (type === 'next') {\n            if (index < $list.length - 1) {\n                instance.slideTo(index + 1);\n            }\n            if (currentIdx > $list.length) {\n                currentIdx = index;\n            }\n            currentIdx++;\n        }\n\n        if (type === 'prev') {\n            if (index > 0) {\n                instance.slideTo(index - 1);\n            }\n            if (currentIdx < -1) {\n                currentIdx = index;\n            }\n            currentIdx--;\n        }\n        console.log(instance.options.loop, currentIdx, type)\n        checkSwiperDisabledClass(currentIdx, $list.length - 1, type);\n    }\n\n    const checkSwiperDisabledClass = (\n        index: number, last: number, type: string) => {\n        const target = type === 'prev' ? -1 : last + 1;\n        const slideToNum = type === 'prev' ? last : 0;\n        if (navigation.nextEl.classList.contains(options.navigation.disabledClass)\n            && type === 'prev') {\n            navigation.nextEl.classList.remove(options.navigation.disabledClass);\n        }\n\n        if (navigation.prevEl.classList.contains(options.navigation.disabledClass)\n            && type === 'next') {\n            navigation.prevEl.classList.remove(options.navigation.disabledClass);\n        }\n        if (instance.options.loop) {\n            if (index === target) {\n                instance.slideTo(slideToNum);\n            }\n        } else {\n            if (instance.state.index === 0) {\n                navigation.prevEl.classList.add(options.navigation.disabledClass);\n            }\n            if (instance.state.index === last) {\n                navigation.nextEl.classList.add(options.navigation.disabledClass);\n            }\n        }\n    }\n\n    const checkIsDisable = (e: HTMLElement) => {\n        if (e.classList.contains(options.navigation.disabledClass)) {\n            return true\n        }\n        return false\n    }\n\n    const checkButtonDefaultStatus = () => {\n        const {\n            index\n        } = instance.state\n        const {\n            $list\n        } = instance.env.element\n        if (index === 0 && !instance.options.loop) {\n            navigation.prevEl.classList.add(options.navigation.disabledClass);\n        }\n        if ($list.length === 1 && !instance.options.loop) {\n            navigation.nextEl.classList.add(options.navigation.disabledClass);\n        }\n    }\n\n    instance.on('before-init', () => {\n        if (options.navigation) {\n            options.navigation = Object.assign({\n                disabledClass: 'swiper-button-disabled'\n            }, options.navigation)\n        }\n    })\n\n    instance.on('after-init', () => {\n        if (!options.navigation) return\n\n        navigation.nextEl = (typeof options.navigation.nextEl === 'string')\n            ? document.body.querySelector(options.navigation.nextEl) as HTMLElement\n            : options.navigation.nextEl\n        navigation.prevEl = (typeof options.navigation.prevEl === 'string')\n            ? document.body.querySelector(options.navigation.prevEl) as HTMLElement\n            : options.navigation.prevEl\n        checkButtonDefaultStatus();\n        attachListener(navigation.nextEl, 'click', <EventListener>nextClickHandler)\n        attachListener(navigation.prevEl, 'click', <EventListener>prevClickHandler)\n    })\n\n    instance.on('after-destroy', () => {\n        if (!options.navigation) return\n\n        delete navigation.nextEl;\n        delete navigation.prevEl;\n\n        detachListener(navigation.nextEl, 'click', <EventListener>nextClickHandler)\n        detachListener(navigation.prevEl, 'click', <EventListener>prevClickHandler)\n    })\n}\n"],"names":["attachListener","el","evtName","handler","opts","addEventListener","detachListener","removeEventListener","SwiperPluginNavigation","instance","options","navigation","nextEl","prevEl","nextClickHandler","e","clickHandler","target","prevClickHandler","type","checkIsDisable","loop","index","state","$list","env","element","currentIdx","length","slideTo","console","log","checkSwiperDisabledClass","last","slideToNum","classList","contains","disabledClass","remove","add","checkButtonDefaultStatus","on","Object","assign","document","body","querySelector"],"mappings":"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"}