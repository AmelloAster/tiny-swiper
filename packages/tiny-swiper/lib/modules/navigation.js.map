{"version":3,"file":"navigation.js","sources":["../../src/core/render/dom.ts","../../src/modules/navigation.ts"],"sourcesContent":["export function addClass (\n    el: HTMLElement,\n    list: Array<string> | string = []\n): void {\n    if (!Array.isArray(list)) list = [list]\n\n    list.forEach(clz => (!el.classList.contains(clz) && el.classList.add(clz)))\n}\n\nexport function removeClass (\n    el: HTMLElement,\n    list: Array<string> | string = []\n): void {\n    if (!Array.isArray(list)) list = [list]\n\n    list.forEach(clz => (el.classList.contains(clz) && el.classList.remove(clz)))\n}\n\nexport function attachListener (\n    el: HTMLElement | Document | Window,\n    evtName: string,\n    handler: EventListenerOrEventListenerObject,\n    opts?: boolean | AddEventListenerOptions\n): void {\n    el.addEventListener(evtName, handler, opts)\n}\n\nexport function detachListener (\n    el: HTMLElement | Document | Window,\n    evtName: string,\n    handler: EventListenerOrEventListenerObject\n): void {\n    el.removeEventListener(evtName, handler)\n}\n\nexport function removeAttr (\n    el: HTMLElement,\n    attr: string\n): void {\n    el.removeAttribute(attr)\n}\n\nexport function setAttr (\n    el: HTMLElement,\n    attr: string,\n    value = ''\n): HTMLElement {\n    el.setAttribute(attr, value)\n    return el\n}\n\nexport function setStyle (\n    el: HTMLElement,\n    style: {[key: string]: string},\n    forceRender?: boolean\n): HTMLElement {\n    Object.keys(style).forEach(prop => {\n        // TS7015: Element implicitly has an 'any' type because index expression is not of type 'number'.\n        el.style[prop as any] = style[prop]\n    })\n    // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n    forceRender && getComputedStyle(el)\n\n    return el\n}\n\nexport function getTranslate (\n    el: HTMLElement,\n    isHorizontal: boolean\n): number {\n    const matrix = getComputedStyle(el).transform.replace(/[a-z]|\\(|\\)|\\s/g, '').split(',').map(parseFloat)\n    let arr: Array<number> = []\n\n    if (matrix.length === 16) {\n        arr = matrix.slice(12, 14)\n    } else if (matrix.length === 6) {\n        arr = matrix.slice(4, 6)\n    }\n    return (<Array<number>>arr)[isHorizontal ? 0 : 1] || 0\n}\n","import {\n    attachListener,\n    detachListener\n} from '../core/render/dom'\nimport { SwiperInstance } from '../core/index'\nimport { Options } from '../core/options'\n\nexport type SwiperPluginNavigationOptions = Options & {\n    navigation: {\n        nextEl: HTMLElement | string\n        prevEl: HTMLElement | string\n        disabledClass: string\n    }\n}\n\nexport type SwiperPluginNavigationInstance = {\n    nextEl: HTMLElement\n    prevEl: HTMLElement\n}\nexport default function SwiperPluginNavigation(\n    instance: SwiperInstance & {\n        navigation: SwiperPluginNavigationInstance\n    },\n    options: SwiperPluginNavigationOptions\n) {\n    const navigation = {\n        nextEl: null,\n        prevEl: null\n    } as unknown as SwiperPluginNavigationInstance\n\n    const nextClickHandler = (e: PointerEvent) => {\n        clickHandler(e.target as HTMLElement, 'next')\n    }\n\n    const prevClickHandler = (e: PointerEvent) => {\n        clickHandler(e.target as HTMLElement, 'prev')\n\n    }\n\n    const clickHandler = (e: HTMLElement, type: 'next' | 'prev') => {\n        if ( checkIsDisable(e) && !instance.options.loop ) {\n            return\n        }\n        const {\n            index\n        } = instance.state\n        const {\n            $list\n        } = instance.env.element\n\n        if ( type === 'next' ) {\n            instance.slideTo(index + 1)\n        }\n\n        if ( type === 'prev' ) {\n            instance.slideTo(index - 1)\n        }\n    }\n\n    const checkSwiperDisabledClass = (\n        index: number, last: number) => {\n        if ( instance.options.loop ) {\n            if ( index === 0 ) {\n                instance.slideTo(last)\n            }\n            if ( index === last ) {\n                instance.slideTo(0)\n            }\n        } else {\n            if ( instance.state.index === 0 ) {\n                navigation.prevEl.classList.add(options.navigation.disabledClass)\n            }\n            if ( instance.state.index === last ) {\n                navigation.nextEl.classList.add(options.navigation.disabledClass)\n            }\n        }\n    }\n\n    const checkNavBtnDisabledClass = (index: number, last: number) => {\n        if ( navigation && navigation.nextEl ) {\n            if ( navigation.nextEl.classList.contains(options.navigation.disabledClass)\n                && index > 0 ) {\n                navigation.nextEl.classList.remove(options.navigation.disabledClass)\n            }\n\n            if ( navigation.prevEl.classList.contains(options.navigation.disabledClass)\n                && index < last ) {\n                navigation.prevEl.classList.remove(options.navigation.disabledClass)\n            }\n        }\n    }\n\n    const checkIsDisable = (e: HTMLElement) => {\n        if ( e.classList.contains(options.navigation.disabledClass) ) {\n            return true\n        }\n        return false\n    }\n\n    const checkButtonDefaultStatus = () => {\n        const {\n            index\n        } = instance.state\n        const {\n            $list\n        } = instance.env.element\n        if ( index === 0 ) {\n            navigation.prevEl.classList.add(options.navigation.disabledClass)\n        }\n        if ( $list.length === 1 ) {\n            navigation.nextEl.classList.add(options.navigation.disabledClass)\n        }\n    }\n\n    instance.on('after-slide', (currentIndex: number) => {\n        checkSwiperDisabledClass(currentIndex, instance.env.element.$list.length - 1)\n    })\n\n    instance.on('before-slide', (currentIndex: number, state: any, newIndex: number) => {\n        checkNavBtnDisabledClass(newIndex, instance.env.element.$list.length - 1)\n    })\n\n    instance.on('before-init', () => {\n        if ( options.navigation ) {\n            options.navigation = Object.assign({\n                disabledClass: 'swiper-button-disabled'\n            }, options.navigation)\n        }\n    })\n\n    instance.on('after-init', () => {\n        if ( !options.navigation ) return\n\n        navigation.nextEl = (typeof options.navigation.nextEl === 'string')\n            ? document.body.querySelector(options.navigation.nextEl) as HTMLElement\n            : options.navigation.nextEl\n        navigation.prevEl = (typeof options.navigation.prevEl === 'string')\n            ? document.body.querySelector(options.navigation.prevEl) as HTMLElement\n            : options.navigation.prevEl\n        if ( !instance.options.loop ) {\n            checkButtonDefaultStatus()\n        }\n        attachListener(navigation.nextEl, 'click', <EventListener>nextClickHandler)\n        attachListener(navigation.prevEl, 'click', <EventListener>prevClickHandler)\n    })\n\n    instance.on('after-destroy', () => {\n        if ( !options.navigation ) return\n\n        delete navigation.nextEl\n        delete navigation.prevEl\n\n        detachListener(navigation.nextEl, 'click', <EventListener>nextClickHandler)\n        detachListener(navigation.prevEl, 'click', <EventListener>prevClickHandler)\n    })\n}\n"],"names":["attachListener","el","evtName","handler","opts","addEventListener","detachListener","removeEventListener","SwiperPluginNavigation","instance","options","navigation","nextEl","prevEl","nextClickHandler","e","clickHandler","target","prevClickHandler","type","checkIsDisable","loop","index","state","$list","env","element","slideTo","checkSwiperDisabledClass","last","classList","add","disabledClass","checkNavBtnDisabledClass","contains","remove","checkButtonDefaultStatus","length","on","currentIndex","newIndex","Object","assign","document","body","querySelector"],"mappings":"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"}