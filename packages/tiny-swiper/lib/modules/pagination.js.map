{"version":3,"file":"pagination.js","sources":["../../src/core/render/dom.ts","../../src/modules/pagination.ts"],"sourcesContent":["export function addClass (\n    el: HTMLElement,\n    list: Array<string> | string = []\n): void {\n    if (!Array.isArray(list)) list = [list]\n\n    list.forEach(clz => (!el.classList.contains(clz) && el.classList.add(clz)))\n}\n\nexport function removeClass (\n    el: HTMLElement,\n    list: Array<string> | string = []\n): void {\n    if (!Array.isArray(list)) list = [list]\n\n    list.forEach(clz => (el.classList.contains(clz) && el.classList.remove(clz)))\n}\n\nexport function attachListener (\n    el: HTMLElement | Document | Window,\n    evtName: string,\n    handler: EventListenerOrEventListenerObject,\n    opts?: boolean | AddEventListenerOptions\n): void {\n    el.addEventListener(evtName, handler, opts)\n}\n\nexport function detachListener (\n    el: HTMLElement | Document | Window,\n    evtName: string,\n    handler: EventListenerOrEventListenerObject\n): void {\n    el.removeEventListener(evtName, handler)\n}\n\nexport function removeAttr (\n    el: HTMLElement,\n    attr: string\n): void {\n    el.removeAttribute(attr)\n}\n\nexport function setAttr (\n    el: HTMLElement,\n    attr: string,\n    value = ''\n): HTMLElement {\n    el.setAttribute(attr, value)\n    return el\n}\n\nexport function setStyle (\n    el: HTMLElement,\n    style: {[key: string]: string},\n    forceRender?: boolean\n): HTMLElement {\n    Object.keys(style).forEach(prop => {\n        // TS7015: Element implicitly has an 'any' type because index expression is not of type 'number'.\n        el.style[prop as any] = style[prop]\n    })\n    // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n    forceRender && getComputedStyle(el)\n\n    return el\n}\n\nexport function getTranslate (\n    el: HTMLElement,\n    isHorizontal: boolean\n): number {\n    const matrix = getComputedStyle(el).transform.replace(/[a-z]|\\(|\\)|\\s/g, '').split(',').map(parseFloat)\n    let arr: Array<number> = []\n\n    if (matrix.length === 16) {\n        arr = matrix.slice(12, 14)\n    } else if (matrix.length === 6) {\n        arr = matrix.slice(4, 6)\n    }\n    return (<Array<number>>arr)[isHorizontal ? 0 : 1] || 0\n}\n","import {\n    addClass,\n    removeClass\n} from '../core/render/dom'\nimport { SwiperInstance } from '../core/index'\nimport { Options } from '../core/options'\n\nexport type SwiperPluginPaginationOptions = Options & {\n    pagination: {\n        el: string\n        clickable: false\n        bulletClass: 'swiper-pagination-bullet'\n        bulletActiveClass: 'swiper-pagination-bullet-active'\n    }\n}\n\nexport type SwiperPluginPaginationInstance = {\n    $pageList: HTMLElement[]\n    $pagination: HTMLElement | null\n}\n\nexport default function SwiperPluginPagination (\n    instance: SwiperInstance & {\n        pagination: SwiperPluginPaginationInstance\n    },\n    options: SwiperPluginPaginationOptions\n) {\n    const pagination = {\n        $pageList: [],\n        $pagination: null\n    } as unknown as SwiperPluginPaginationInstance\n\n    instance.on('before-init', () => {\n        if (options.pagination) {\n            options.pagination = {\n                clickable: false,\n                bulletClass: 'swiper-pagination-bullet',\n                bulletActiveClass: 'swiper-pagination-bullet-active',\n                ...options.pagination\n            }\n        }\n    })\n\n    instance.on('after-init', () => {\n        if (!options.pagination) return\n\n        const {\n            bulletClass,\n            bulletActiveClass\n        } = options.pagination\n        const {\n            element\n        } = instance.env\n        const {\n            $list\n        } = element\n\n        const $pagination = (typeof options.pagination.el === 'string'\n            ? document.body.querySelector(options.pagination.el)\n            : options.pagination.el) as HTMLElement\n        const $pageList: Array<HTMLElement> = []\n        const $group = document.createDocumentFragment()\n\n        options.excludeElements.push($pagination as HTMLElement)\n\n        pagination.$pagination = $pagination\n        pagination.$pageList = $pageList\n\n        $list.forEach((item, index) => {\n            const $page = document.createElement('div')\n\n            addClass(\n                $page,\n                index === instance.state.index ? [bulletClass, bulletActiveClass] : bulletClass\n            )\n            $pageList.push($page)\n            $group.appendChild($page)\n        })\n\n        $pagination.appendChild($group)\n\n        if (options.pagination.clickable) {\n            $pagination.addEventListener('click', (e: Event) => {\n                instance.slideTo($pageList.indexOf(e.target as HTMLElement))\n                e.stopPropagation()\n            })\n        }\n    })\n\n    instance.on('after-destroy', () => {\n        if (!options.pagination) return\n\n        pagination.$pagination!.innerHTML = ''\n        pagination.$pageList = []\n        pagination.$pagination = null\n    })\n\n    instance.on('after-slide', (\n        currentIndex: number\n    ) => {\n        const { bulletActiveClass } = options.pagination\n\n        pagination.$pageList && pagination.$pageList.forEach(($page, index) => {\n            if (index === currentIndex) {\n                addClass($page, bulletActiveClass)\n            } else {\n                removeClass($page, bulletActiveClass)\n            }\n        })\n    })\n}\n"],"names":["addClass","el","list","Array","isArray","forEach","clz","classList","contains","add","removeClass","remove","SwiperPluginPagination","instance","options","pagination","$pageList","$pagination","on","clickable","bulletClass","bulletActiveClass","element","env","$list","document","body","querySelector","$group","createDocumentFragment","excludeElements","push","item","index","$page","createElement","state","appendChild","addEventListener","e","slideTo","indexOf","target","stopPropagation","innerHTML","currentIndex"],"mappings":"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"}