{"version":3,"file":"pagination.js","sources":["../../src/core/render/dom.ts","../../src/modules/pagination.ts"],"sourcesContent":["export function addClass (\n    el: HTMLElement,\n    list: Array<string> | string = []\n): void {\n    if (!Array.isArray(list)) list = [list]\n\n    list.forEach(clz => (!el.classList.contains(clz) && el.classList.add(clz)))\n}\n\nexport function removeClass (\n    el: HTMLElement,\n    list: Array<string> | string = []\n): void {\n    if (!Array.isArray(list)) list = [list]\n\n    list.forEach(clz => (el.classList.contains(clz) && el.classList.remove(clz)))\n}\n\nexport function attachListener (\n    el: HTMLElement | Document | Window,\n    evtName: string,\n    handler: EventListenerOrEventListenerObject,\n    opts?: boolean | AddEventListenerOptions\n): void {\n    el.addEventListener(evtName, handler, opts)\n}\n\nexport function detachListener (\n    el: HTMLElement | Document | Window,\n    evtName: string,\n    handler: EventListenerOrEventListenerObject\n): void {\n    el.removeEventListener(evtName, handler)\n}\n\nexport function removeAttr (\n    el: HTMLElement,\n    attr: string\n): void {\n    el.removeAttribute(attr)\n}\n\nexport function setAttr (\n    el: HTMLElement,\n    attr: string,\n    value = ''\n): HTMLElement {\n    el.setAttribute(attr, value)\n    return el\n}\n\nexport function setStyle (\n    el: HTMLElement,\n    style: {[key: string]: string},\n    forceRender?: boolean\n): HTMLElement {\n    Object.keys(style).forEach(prop => {\n        // TS7015: Element implicitly has an 'any' type because index expression is not of type 'number'.\n        el.style[prop as any] = style[prop]\n    })\n    // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n    forceRender && getComputedStyle(el)\n\n    return el\n}\n\nexport function getTranslate (\n    el: HTMLElement,\n    isHorizontal: boolean\n): number {\n    const matrix = getComputedStyle(el).transform.replace(/[a-z]|\\(|\\)|\\s/g, '').split(',').map(parseFloat)\n    let arr: Array<number> = []\n\n    if (matrix.length === 16) {\n        arr = matrix.slice(12, 14)\n    } else if (matrix.length === 6) {\n        arr = matrix.slice(4, 6)\n    }\n    return (<Array<number>>arr)[isHorizontal ? 0 : 1] || 0\n}\n","import {\n    addClass,\n    removeClass\n} from '../core/render/dom'\nimport { SwiperInstance } from '../core/index'\nimport { Options } from '../core/options'\n\nexport type SwiperPluginPaginationOptions = Options & {\n    pagination: {\n        el: string\n        clickable: false\n        bulletClass: 'swiper-pagination-bullet'\n        bulletActiveClass: 'swiper-pagination-bullet-active'\n    }\n}\n\nexport type SwiperPluginPaginationInstance = {\n    $pageList: HTMLElement[]\n    $pagination: HTMLElement | null\n}\n\nexport default function SwiperPluginPagination (\n    instance: SwiperInstance & {\n        pagination: SwiperPluginPaginationInstance\n    },\n    options: SwiperPluginPaginationOptions\n) {\n    const pagination = {\n        $pageList: [],\n        $pagination: null\n    } as unknown as SwiperPluginPaginationInstance\n\n    instance.on('before-init', () => {\n        if (options.pagination) {\n            options.pagination = Object.assign({\n                clickable: false,\n                bulletClass: 'swiper-pagination-bullet',\n                bulletActiveClass: 'swiper-pagination-bullet-active'\n            }, options.pagination)\n        }\n    })\n\n    instance.on('after-init', () => {\n        if (!options.pagination) return\n\n        const {\n            bulletClass,\n            bulletActiveClass\n        } = options.pagination\n        const {\n            element\n        } = instance.env\n        const {\n            $list\n        } = element\n\n        const $pagination = (typeof options.pagination.el === 'string'\n            ? document.body.querySelector(options.pagination.el)\n            : options.pagination.el) as HTMLElement\n        const $pageList: Array<HTMLElement> = []\n        const $group = document.createDocumentFragment()\n        const dotCount = $list.length - Math.ceil(options.slidesPerView) + 1\n\n        options.excludeElements.push($pagination as HTMLElement)\n\n        pagination.$pagination = $pagination\n        pagination.$pageList = $pageList\n\n        for (let index = 0; index < dotCount; index++) {\n            const $page = document.createElement('div')\n\n            addClass(\n                $page,\n                index === instance.state.index ? [bulletClass, bulletActiveClass] : bulletClass\n            )\n            $pageList.push($page)\n            $group.appendChild($page)\n        }\n\n        $pagination.appendChild($group)\n\n        if (options.pagination.clickable) {\n            $pagination.addEventListener('click', (e: Event) => {\n                instance.slideTo($pageList.indexOf(e.target as HTMLElement))\n                e.stopPropagation()\n            })\n        }\n    })\n\n    instance.on('after-destroy', () => {\n        if (!options.pagination) return\n\n        pagination.$pagination!.innerHTML = ''\n        pagination.$pageList = []\n        pagination.$pagination = null\n    })\n\n    instance.on('after-slide', (\n        currentIndex: number\n    ) => {\n        const { bulletActiveClass } = options.pagination\n\n        pagination.$pageList && pagination.$pageList.forEach(($page, index) => {\n            if (index === currentIndex) {\n                addClass($page, bulletActiveClass)\n            } else {\n                removeClass($page, bulletActiveClass)\n            }\n        })\n    })\n}\n"],"names":["addClass","el","list","Array","isArray","forEach","clz","classList","contains","add","removeClass","remove","SwiperPluginPagination","instance","options","pagination","$pageList","$pagination","on","Object","assign","clickable","bulletClass","bulletActiveClass","element","env","$list","document","body","querySelector","$group","createDocumentFragment","dotCount","length","Math","ceil","slidesPerView","excludeElements","push","index","$page","createElement","state","appendChild","addEventListener","e","slideTo","indexOf","target","stopPropagation","innerHTML","currentIndex"],"mappings":"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"}